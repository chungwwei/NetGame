{"version":3,"sources":["game/inertia/Inertia.ts","ds/CommandManager.ts","ds/RotateCommand.ts","game/Cell.ts","game/LevelManager.ts","game/FloodTube.ts","ds/SokobanMoveCommand.ts","game/sokoban/player.ts","game/sokoban/SokobanCell.ts","game/sokoban/SokobanLevel.ts","game/sokoban/SokobanLevelManager.ts","game/sokoban/Sokoban.ts","ds/InertiaMoveCommand.ts","game/inertia/InertiaCell.ts","game/inertia/InertiaLevel.ts","game/inertia/InertiaLevelManager.ts","game/lightup/LightUp.ts","components/inertiaComponent/InertiaCellComponent.tsx","images/circle_player.png","images/wall.png","images/broken_circle.png","images/coin.png","images/bomb.png","components/inertiaComponent/InertiaComponent.tsx","components/Timer.tsx","components/inertiaComponent/InertiaApp.tsx","components/SokobanCellComponent.tsx","images/player.png","images/box.png","components/SokobanComponent.tsx","components/CellComponent.tsx","images/i0.png","images/i1.png","images/finish.png","images/start.png","images/d0.png","images/d1.png","images/d2.png","images/d3.png","images/t0.png","images/t1.png","images/t2.png","images/t3.png","images/4ways.png","components/FloodTubeComponent.tsx","components/HudComponent.tsx","ds/NumberArraySet.ts","game/lightup/LightUpCell.ts","game/lightup/LightUpLevel.ts","game/lightup/LightUpLevelManager.ts","components/lightupComponent/LightUpComponent.tsx","components/lightupComponent/LightUpCellComponent.tsx","images/lightbulb.png","components/lightupComponent/LightUpApp.tsx","components/home/CollectionComponent.tsx","components/home/AppBarComponent.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Directions","CommandManager","undoStk","redoStk","command","this","push","commands","length","last","pop","undo","redo","RotateCommand","game","grid","curGrid","i","j","deepCopy","setBoard","Cell","type","isStart","isFinish","isPartPath","imgSrc","LevelManager","levels","currentLevel","Map","initLevels","set","get","FloodTubes","row","col","board","R","C","dirs","levelManager","commandManager","solutionBoard","node","dx","dy","lst","x","y","seen","q","layer","shift","d","ni","nj","isWithinBound","p","reverseDirs","console","log","isCompatible","r","c","t","newIndex","charAt","curIndex","old","getBoard","rotateCommand","execute","level","finishSites","cnt","win","category","start","backtrack","backtrackWrapping","hasSolution","val","curType","end","k","temp","hasSolutionWrapping","rotations","unshift","newBoard","SokobanMoveCommand","player","playerX","playerY","getX","getY","cell","setI","getI","setJ","getJ","setType","getType","setIsBox","getIsBox","setIsPlayer","getIsPlayer","setX","setY","stk","getCommandManager","Player","initX","initY","SokobanCell","isPlayer","isBox","bool","SokobanLevel","levelName","baseLayer","boxesPos","playerPos","numBoxes","SokobanLevelManager","curLevel","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","requestedLevel","undefined","Sokoban","numberOfBoxes","getLevels","getLevel","setCurLevel","base","getBaseLayer","getBoxesPos","getPlayerPos","getNumBoxes","dir","tmp","newX","newY","nr","nc","curPlayerX","curPlayerY","newPlayerX","newPlayerY","newBoxX","newBoxY","InertiaMoveCommand","setIsBomb","getIsBomb","setIsGem","getIsGem","setIsBrokenCircle","getIsBrokenCircle","setIsGround","getIsGround","setIsWall","getIsWall","InertiaCell","isWall","isGem","isBrokeCircle","isBomb","isGround","isBrokenCircle","toString","InertiaLevel","numGems","InertiaLevelManager","Toggle","Inertia","startLevel","Math","abs","SAME","LEFT","RIGHT","UP","DOWN","UPLEFT","UPRIGHT","DOWNLEFT","DOWNRIGHT","canMove","movable","getCurLevel","loadLevel","InertiaCellComponent","props","onClick","isBrokenCirlce","cellClassName","imgName","id","className","src","alt","InertiaComponent","useState","setRefresh","useEffect","timer","setTimeout","clearTimeout","map","item","movePlayer","pre","move","Timer","seconds","setSeconds","resetTimer","interval","setInterval","clearInterval","min","floor","sec","formatTime","inertia","InertiaApp","keys","setResetTimer","Select","labelId","onChange","e","event","target","value","prev","handleChange","MenuItem","Button","reset","getPlayer","SokobanCellComponent","Component","SokobanComponent","state","moves","refresh","won","resetTime","code","key","respond","withBox","moveBox","manager","hasWon","setState","getLevelManger","InputLabel","variant","color","handleReset","handleUndoClick","handleRedoClick","tabIndex","onKeyDown","handleKeys","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","message","open","onClose","React","CellComponent","FloodTubeComponent","rotate","path","document","getElementById","selectedLevel","split","BFS","animatePath","wrappingBFS","runBFS","handleClick","HudComponent","str","index","minBFS","FormControl","htmlFor","native","defaultValue","aria-label","label","Array","v","handleSolveClick","NumberArraySet","arr","has","every","removeIdx","splice","LightUpCell","isLight","isBlock","isCross","isEmpty","lightsNum","isLightenUp","LightUpLevel","minLights","LightUpLevelManager","getLevelLightRequirement","LightUp","lightbulbs","rowsLimit","colsLimit","lightWalls","getIsBlock","getIsCross","NOTAPPLICABLE","toggle","toggleCells","getIsLight","OFF","ON","add","setIsLight","findAllEnlightenCells","remove","getLightenCells","countEnlightenCells","getLevelRequirement","limit","getLightsNum","lightConflict","res","enlightenCells","LightUpCellComponent","lightNum","lightLimit","Pair","tuples","a","LightUpComponent","setToggleCells","allCells","setAllCells","setToggle","setKeyCnt","getIsEmpty","lightup","LightUpApp","setSelectedLevelRefresh","setRequestedLevel","reqLevel","useStyles","makeStyles","collectionCard","minWidth","margin","background","collectionContainer","paddingLeft","paddingRight","flood_tube","sokoban","CollectionComponent","classes","exact","Grid","container","spacing","justify","href","Card","CardActionArea","CardContent","to","xs","sm","homeBtn","marginRight","AppBarComponent","AppBar","position","Toolbar","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.739796e8.chunk.js","sourcesContent":["import { CommandManager } from \"../../ds/CommandManager\"\nimport { InertiaMoveCommand } from \"../../ds/InertiaMoveCommand\"\nimport { Cell } from \"../Cell\"\nimport { LevelManager } from \"../LevelManager\"\nimport { Player } from \"../sokoban/player\"\nimport { InertiaCell } from \"./InertiaCell\"\nimport { InertiaLevel } from \"./InertiaLevel\"\nimport { InertiaLevelManager } from \"./InertiaLevelManager\"\n\nexport enum Directions {\n    UP,\n    DOWN,\n    LEFT,\n    RIGHT,\n    UPLEFT,\n    UPRIGHT,\n    DOWNLEFT,\n    DOWNRIGHT,\n    SAME,\n}\n\nexport class Inertia {\n    \n    private board: InertiaCell[][]\n    private R: number\n    private C: number\n\n    private commandManager: CommandManager\n\n    private dirs: Map<string, number[]>\n    private player: Player\n    private numberOfBoxes: number\n    private levelManager: InertiaLevelManager\n\n\n    constructor(row: number, col: number) {\n        this.numberOfBoxes = -1\n        this.commandManager = new CommandManager()\n        this.levelManager = new InertiaLevelManager()\n\n        this.dirs = new Map()\n        this.dirs.set(\"w\", [-1, 0])\n        this.dirs.set(\"s\", [1, 0])\n        this.dirs.set(\"a\", [0, -1])\n        this.dirs.set(\"d\", [0, 1])\n\n        let startLevel = this.levelManager.getLevel('1')!\n        let layer = startLevel.getBaseLayer()\n        let playerX = startLevel.getPlayerPos()[0]\n        let playerY = startLevel.getPlayerPos()[1]\n        // init board\n        this.board = []\n        this.R = row\n        this.C = col\n        for (let i = 0; i < row; i ++) {\n            this.board[i] = []\n            for (let j = 0; j < col; j ++) {\n                let isWall = layer[i][j] === 'w'\n                let isBrokeCircle = layer[i][j] === 'c'\n                let isGem = layer[i][j] === 'j'\n                let isBomb = layer[i][j] === 'b'\n                let isGround = layer[i][j] === 'g'\n                let isPlayer = (i === playerX && j === playerY)\n                let node = new InertiaCell(i, j, layer[i][j], isPlayer, isWall, isGem, isBrokeCircle, isBomb, isGround)\n                this.board[i].push(node)\n            }\n        }\n        this.player = new Player(playerX, playerY)\n        let command = new InertiaMoveCommand(this, this.getBoard(), this.player)\n        this.commandManager.execute(command)\n    }\n\n    public canMove(i: number, j: number): [boolean, Directions] {\n        i += 1\n        j += 1\n        let playerX: number = this.player.getX() + 1\n        let playerY: number = this.player.getY() + 1\n\n        let dx = Math.abs(playerX - i)\n        let dy = Math.abs(playerY - j)\n        if (i == playerX && j == playerY) return [false, Directions.SAME]\n        \n        if (i == playerX) {\n            if (j < playerY) return [true, Directions.LEFT]\n            else return [true, Directions.RIGHT]\n        } else if (j == playerY) {\n            if (i < playerX) return [true, Directions.UP]\n            else return [true, Directions.DOWN]\n        } else {\n            if (dy !== dx) return [false, Directions.SAME]\n            if (i < playerX && j < playerY) return [true, Directions.UPLEFT]\n            if (i < playerX && j > playerY) return [true, Directions.UPRIGHT]\n            if (i > playerX && j < playerY) return [true, Directions.DOWNLEFT]\n            if (i > playerX && j > playerY) return [true, Directions.DOWNRIGHT]\n        }\n\n        return [false, Directions.SAME]\n    }\n\n\n    public movePlayer(x: number, y: number) {\n        console.log('command: move player')\n        let temp = this.canMove(x, y)\n        let [movable, dir] = temp\n        if (!movable) return\n\n        let playerX: number = this.player.getX()\n        let playerY: number = this.player.getY()\n        if (this.board[playerX][playerY].getIsBomb()) return\n\n        let i: number = playerX\n        let j: number = playerY\n        let dx = 0\n        let dy = 0\n        if (dir === Directions.UP) {\n            dx = -1\n        } else if (dir === Directions.DOWN) {\n            dx = 1\n        } else if(dir === Directions.LEFT) {\n            dy = -1\n        } else if(dir === Directions.RIGHT) {\n            dy = 1\n        } else if (dir === Directions.UPLEFT) {\n            dx = -1\n            dy = -1\n        } else if (dir === Directions.UPRIGHT) {\n            dx = -1\n            dy = 1\n        } else if (dir === Directions.DOWNLEFT) {\n            dx = 1\n            dy = -1\n        } else if (dir === Directions.DOWNRIGHT) {\n            dx = 1\n            dy = 1\n        }\n\n        \n        while (this.isWithinBound(i + dx, j + dy)) {\n            i += dx \n            j += dy\n            if (this.board[i][j].getIsGem()) {\n                this.board[i][j].setIsGem(false)\n            }\n            if (this.board[i][j].getIsBrokenCircle()) break\n            if (this.board[i][j].getIsBomb()) break\n            if (this.board[i][j].getIsWall()) {\n                i -= dx\n                j -= dy\n                break\n            }\n        }\n\n        this.board[playerX][playerY].setIsPlayer(false)\n        this.board[i][j].setIsPlayer(true)\n        this.player.setX(i)\n        this.player.setY(j)\n\n        let command = new InertiaMoveCommand(this, this.getBoard(), this.player)\n        this.commandManager.execute(command)\n        console.log(this.commandManager.undoStk)\n    }\n\n    public hasWon(): boolean {\n        return false\n    }\n\n    public undo() {\n        this.commandManager.undo()\n    }\n\n    public redo() {\n        this.commandManager.redo()\n    }\n    \n    public reset() {\n        let curLevel = this.levelManager.getCurLevel()\n        this.loadLevel(curLevel)\n    }\n\n    public loadLevel(requestedLevel: string) {\n        \n        let level: InertiaLevel = this.levelManager.getLevel(requestedLevel)!\n        if (level === undefined || level === null) return\n\n        this.levelManager.setCurLevel(requestedLevel)\n        let layer = level.getBaseLayer()\n        let row = this.R\n        let col = this.C\n        let playerX = level.getPlayerPos()[0]\n        let playerY = level.getPlayerPos()[1]\n        for (let i = 0; i < row; i ++) {\n            this.board[i] = []\n            for (let j = 0; j < col; j ++) {\n                let isWall = layer[i][j] === 'w'\n                let isBrokeCircle = layer[i][j] === 'c'\n                let isGem = layer[i][j] === 'j'\n                let isBomb = layer[i][j] === 'b'\n                let isGround = layer[i][j] === 'g'\n                let isPlayer = (i === playerX && j === playerY)\n                let node = new InertiaCell(i, j, layer[i][j], isPlayer, isWall, isGem, isBrokeCircle, isBomb, isGround)\n                this.board[i].push(node)\n            }\n        }\n        this.commandManager = new CommandManager()\n        this.player = new Player(playerX, playerY)\n        let command = new InertiaMoveCommand(this, this.getBoard(), this.player)\n        this.commandManager.execute(command)\n    }\n    \n    public isWithinBound(i: number, j: number) {\n        if (i >= 0 && i < this.R && j >= 0 && j < this.C)\n            return true\n        return false\n    }\n\n    public setBoard(newBoard: InertiaCell[][]) {\n        this.board = newBoard\n    }\n\n    public getBoard() {\n        return this.board\n    }\n\n    public getLevels() {\n        return this.levelManager.getLevels()\n    }\n\n    public getCommandManager(): CommandManager {\n        return this.commandManager\n    }\n\n    public getLevelManger() {\n        \n    }\n\n    public getPlayer() {\n        return this.player\n    }\n\n    public setPlayer(player: Player) {\n        this.player = player\n    }\n\n    public toString = () : string => {\n        return this.getBoard().toString()\n    }\n\n}","import { ICommand } from \"./ICommand\";\n\nexport class CommandManager {\n\n    public undoStk: ICommand[] = []\n    public redoStk: ICommand[] = []\n    \n    public execute(command: ICommand) {\n        this.undoStk.push(command)\n        this.redoStk = []\n    }\n\n    public executeCommands(commands :ICommand[]) {\n\n    }\n\n    public undo() {\n        if (this.undoStk.length > 0) {\n            let last = this.undoStk.pop()!\n            // execute the current top of stk after the lastest is popped\n            last.undo()\n            this.redoStk.push(last)\n        }\n\n    }\n\n    public redo() {\n        if (this.redoStk.length > 0) {\n            let last = this.redoStk.pop()!\n            last.redo()\n            this.undoStk.push(last)\n        }\n    }\n}","import { runInThisContext } from \"vm\";\nimport { Cell } from \"../game/Cell\";\nimport { FloodTubes } from \"../game/FloodTube\";\nimport { ICommand } from \"./ICommand\";\n\nexport class RotateCommand implements ICommand {\n\n    private game: FloodTubes\n    public curGrid: Cell[][]\n\n    constructor(game: FloodTubes, grid: Cell[][]) {\n        this.game = game\n        this.curGrid = []\n\n        for (let i = 0; i < grid.length; i ++) {\n            this.curGrid[i] = []\n            for (let j = 0; j < grid[i].length; j ++) {\n                this.curGrid[i].push(grid[i][j].deepCopy())\n            }\n        }\n    }\n    \n\n    public execute() {\n        \n    }\n\n    public undo() {\n        this.game.setBoard(this.curGrid)\n    }\n\n    public redo() {\n        this.game.setBoard(this.curGrid)\n    }\n\n}","export class Cell {\n    private i: number\n    private j: number\n    public type: string\n\n    public isStart: boolean\n    public isFinish: boolean\n    public isPartPath: boolean\n\n    public imgSrc: string\n\n\n    constructor(i: number, j: number, type: string, isStart: boolean, isFinish: boolean, isPartPath: boolean) {\n        this.i = i\n        this.j = j\n        this.type = type \n        this.isFinish = isFinish\n        this.isStart = isStart\n        this.isPartPath = isPartPath\n\n        this.imgSrc = '/src/i0.png'\n    }\n\n    public deepCopy() {\n        return new Cell(\n            this.i,\n            this.j,\n            this.type,\n            this.isStart,\n            this.isFinish,\n            this.isPartPath\n        )\n    }\n}","export class LevelManager {\n\n    public levels: Map<string, string[][][]>\n    public currentLevel: string\n\n    constructor() {\n        this.levels = new Map()\n        this.currentLevel = 'none'\n        this.initLevels()\n    }\n\n\n\n    initLevels() {\n        this.levels.set('classic',  [])\n        this.levels.set('wrapping', [])\n        this.levels.get('classic')?.push(\n            [\n                ['start', 't0', 'd0', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 't0', 'i0', 'i0', 'd0', 't2', 'finish', 'blank', 'blank', 'blank'],\n                ['blank', 'finish', 'blank', 'blank', 't2', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 't1', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 't1', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'start', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank']\n            ],\n            [\n                ['start', 'i0', 'd0', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'd0', 'd0', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'finish', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank']\n            ],\n            [\n                ['d1', 'finish', 'd0', 'i0', 'd1', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['d1', 'blank', 'd0', 'd1', 'd1', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['i0', 'd0', 'blank', 'd1', 'd1', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['start', 'i0', 'i0', 'i0', 't1', 'finish', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank']\n            ],\n            [\n                ['finish', 'd1', 'finish', 'd1', 'finish', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['d1', 't1', 'd0', 't1', 'finish', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['finish', 'i0', 'start', 'd1', 'd1', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['i0', 'i0', 't1', 'd1', 'finish', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['d2', 'd1', 'd2', 't1', 'finish', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank']\n            ],\n            [\n                ['finish', 'd1', 'finish', 'd1', 'finish', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['d1', 't1', 'd0', 't1', 'finish', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['finish', 'i0', 'start', 'd1', 'd1', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['i0', 'i0', 't1', 'd1', 'finish', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['d2', 'd1', 'd2', 't1', 'finish', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank']\n            ],\n            [\n                ['start', 'd0', '', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 't0', 'i0', 'i0', 't1', 't2', 'finish', 'blank', 'blank', 'blank'],\n                ['blank', 'finish', 'blank', 'blank', 't2', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 't0', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 't1', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'finish', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank']\n            ],\n            [\n                ['start', 't0', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 't0', 'i0', 'i0', 't1', 't2', 'finish', 'blank', 'blank', 'blank'],\n                ['blank', 'finish', 'blank', 'blank', 't2', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 't0', 't1', 'finish', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 't1', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'finish', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank']\n            ],\n        )\n\n\n        this.levels.get('wrapping')?.push(\n            [\n                ['i0', 'start', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'd0', 'i0'],\n                ['blank', 'd0', 'd0', 'blank', 'blank', 'blank', 'blank', 'blank', 'finish', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank']\n            ],\n            [\n                ['start', 'i1', 'd0', 'blank', 'blank', 'blank', 'blank', 'blank', 'finish', 'blank'],\n                ['i1', 'i1', 't0', 'blank', 'blank', 'blank', 'blank', 'blank', 'd2', 'i1'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'd1', 'i1'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank']\n            ],\n            [\n                ['blank', 'i1', 'd0', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['i1', 'i1', 't0', 't2', 'finish', 'blank', 'blank', 'blank', 'd2', 'i1'],\n                ['blank', 'blank', 't1', 'blank', 'blank', 'blank', 'blank', 'blank', 'd1', 'i1'],\n                ['blank', 'blank', 'start', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank']\n            ],\n            [\n                ['start', 'blank', 'd0', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['t1', 'blank', 't0', 'blank', 'blank', 'blank', 'blank', 'blank', 'd2', 'i1'],\n                ['d1', 'i0', 'd1', 'blank', 'blank', 'blank', 'blank', 'blank', 'd1', 'i1'],\n                ['i0', 'd2', 't1', 'blank', 'blank', 'blank', 'blank', 'blank', 'i0', 'finish'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'd2', 'd3'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank']\n            ],\n            [\n                ['blank', 'blank', 'blank', 'blank', 't0', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['d0', 't1', 'finish', 'blank', 'start', 'i0', 'i0', 'd1', 'blank', 'blank'],\n                ['t1', 'blank', 'blank', 'blank', 'i1', 'blank', 'blank', 'd1', 'i0', 'i0'],\n                ['blank', 'blank', 'blank', 'blank', 'i1', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank']\n            ],\n            [\n                ['blank', 'i1', 'd0', 'blank', 'blank', 'blank', 'blank', 'blank', 'finish', 'blank'],\n                ['i1', 'i1', 't0', 't2', 'finish', 'blank', 'blank', 'blank', 'd2', 'i1'],\n                ['blank', 'blank', 't1', 'blank', 'blank', 'blank', 'blank', 'blank', 'd1', 'i1'],\n                ['blank', 'blank', 'start', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank']\n            ],\n            [\n                ['blank', 'i1', 'd0', 'blank', 'blank', 'blank', 'blank', 'blank', 'finish', 'blank'],\n                ['i1', 'i1', 't0', 't2', 'finish', 'blank', 'blank', 'blank', 't1', 'i1'],\n                ['blank', 'blank', 't1', 'blank', 'blank', 'blank', 'blank', 'blank', 't1', 'i1'],\n                ['blank', 'blank', 'start', 'blank', 'blank', 'blank', 'blank', 'finish', 'd0', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank'],\n                ['blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank', 'blank']\n            ],\n        )\n    }\n}","import { stringify } from \"querystring\"\nimport { CommandManager } from \"../ds/CommandManager\"\nimport { RotateCommand } from \"../ds/RotateCommand\"\nimport { Cell } from \"./Cell\"\nimport { LevelManager } from \"./LevelManager\"\n\nexport class FloodTubes {\n    \n    private board: Cell[][]\n    private R: number\n    private C: number\n\n    private dirs: Map<string, number[][]>\n\n    private levelManager: LevelManager\n    private commandManager: CommandManager\n    private levels: Map<string, string[][][]>\n\n    private solutionBoard?: Cell[][]\n\n    constructor(row: number, col: number) {\n\n        this.commandManager = new CommandManager()\n        this.levelManager = new LevelManager()\n        this.levels = this.levelManager.levels\n\n        // init board\n        this.board = []\n        this.R = row\n        this.C = col\n        for (let i = 0; i < row; i ++) {\n            this.board[i] = []\n            for (let j = 0; j < col; j ++) {\n                let node = new Cell(i, j, 'blank', false, false, false)\n                this.board[i].push(node)\n            }\n        }\n        \n        // set dirs\n        this.dirs = new Map()\n        this.dirs.set('i0', [[1, 0], [-1, 0]])\n        this.dirs.set('i1', [[0, -1], [0, 1]])\n\n        this.dirs.set('d0', [[-1, 0], [0, 1]])\n        this.dirs.set('d1', [[1, 0], [0, 1]])\n        this.dirs.set('d2', [[1, 0], [0, -1]])\n        this.dirs.set('d3', [[-1, 0], [0, -1]])\n\n\n        this.dirs.set('t0', [[-1, 0], [0, -1], [0, 1]])\n        this.dirs.set('t1', [[1, 0], [-1, 0], [0, 1]])\n        this.dirs.set('t2', [[0, 1], [0, -1], [1, 0]])\n        this.dirs.set('t3', [[1, 0], [-1, 0], [0, -1]])\n\n        this.dirs.set('e0', [[-1, 0]])\n        this.dirs.set('e1', [[0, 1]])\n        this.dirs.set('e2', [[1, 0]])\n        this.dirs.set('e3', [[0, -1]])\n\n        // this.dirs.set('s0', [[1, 0], [-1, 0],[0, -1], [0, 1]])\n        // this.dirs.set('s1', [[1, 0], [-1, 0],[0, -1], [0, 1]])\n        // this.dirs.set('s2', [[1, 0], [-1, 0],[0, -1], [0, 1]])\n        // this.dirs.set('s3', [[1, 0], [-1, 0],[0, -1], [0, 1]])\n        // this.dirs.set('s4', [[1, 0], [-1, 0],[0, -1], [0, 1]])\n        // this.dirs.set('s-1', [[1, 0], [-1, 0],[0, -1], [0, 1]])\n\n        // this.dirs.set('f0', [[1, 0], [-1, 0],[0, -1], [0, 1]])\n        // this.dirs.set('f1', [[1, 0], [-1, 0],[0, -1], [0, 1]])\n        // this.dirs.set('f2', [[1, 0], [-1, 0],[0, -1], [0, 1]])\n        // this.dirs.set('f3', [[1, 0], [-1, 0],[0, -1], [0, 1]])\n        // this.dirs.set('f4', [[1, 0], [-1, 0],[0, -1], [0, 1]])\n        // this.dirs.set('f-1', [[1, 0], [-1, 0],[0, -1], [0, 1]])\n\n        this.dirs.set('blank', [[]])\n        this.dirs.set('4ways', [[1, 0], [-1, 0], [0, -1], [0, 1]])\n        this.dirs.set('start', [[1, 0], [-1, 0],[0, -1], [0, 1]])\n        this.dirs.set('finish', [[1, 0], [-1, 0],[0, -1], [0, 1]])\n        \n    }\n\n    private isCompatible(dx: number, dy: number, lst: number[][]): boolean {\n\n        for (const[x, y] of lst) {\n            if (dx === -x && dy === -y) {\n                return true\n            }\n        }\n        return false\n        \n    }\n\n    public wrappingBFS() {\n        let seen: boolean[][] = []\n        let q: any[][] = []        // <i, j, distance, type>\n        for (let i = 0; i < this.R; i ++) {\n            seen.push([])\n            for (let j = 0; j < this.C; j ++) {\n                seen[i].push(false)\n                if (this.board[i][j].type === 'start') {\n                    seen[i][j] = true\n                    q.push([i, j, 0, 'start'])\n                }\n            }\n        }\n\n        let layer = []\n        while (q.length != 0) {\n            let front = q.shift()\n            let [i, j, d, type] = front!\n            let size = q.length\n            let dirs = this.dirs.get(type)\n            if (type === 'end') return layer\n            for (const [dx, dy] of dirs!) {\n                let ni = (i + dx + this.R) % this.R\n                let nj = (j + dy + this.C) % this.C\n                if (this.isWithinBound(ni, nj)) {\n                    let p = this.board[ni][nj].type\n                    let reverseDirs = this.dirs.get(p)!\n                    console.log(ni + \" \" + nj + \" \", p)\n                    if ((!seen[ni][nj]) && \n                        (this.board[ni][nj].type !== 'blank') &&\n                        (this.isCompatible(dx, dy, reverseDirs))) {\n                            q.push([ni, nj, d + 1, this.board[ni][nj].type])\n                            layer.push([ni, nj])\n                            seen[ni][nj] = true\n\n                            this.board[ni][nj].isPartPath = true\n                    }\n                }\n            }\n        }\n        console.log(layer)\n        return layer\n    }\n\n    public BFS() {\n        let seen: boolean[][] = []\n        let q: any[][] = []        // <i, j, distance, type>\n        for (let i = 0; i < this.R; i ++) {\n            seen.push([])\n            for (let j = 0; j < this.C; j ++) {\n                seen[i].push(false)\n                if (this.board[i][j].type === 'start') {\n                    seen[i][j] = true\n                    q.push([i, j, 0, 'start'])\n                }\n            }\n        }\n\n        let layer = []\n        while (q.length != 0) {\n            let front = q.shift()\n            let [i, j, d, type] = front!\n            let size = q.length\n            let dirs = this.dirs.get(type)\n            if (type === 'end') return layer\n            for (const [dx, dy] of dirs!) {\n                let ni = i + dx\n                let nj = j + dy\n                if (this.isWithinBound(ni, nj)) {\n                    let p = this.board[ni][nj].type\n                    let reverseDirs = this.dirs.get(p)!\n                    if ((!seen[ni][nj]) && \n                        (this.board[ni][nj].type !== 'blank') &&\n                        (this.isCompatible(dx, dy, reverseDirs))) {\n                            q.push([ni, nj, d + 1, this.board[ni][nj].type])\n                            layer.push([ni, nj])\n                            seen[ni][nj] = true\n\n                            this.board[ni][nj].isPartPath = true\n                    }\n                }\n            }\n        }\n        console.log(layer)\n        return layer\n    }\n\n    public rotate(r: number, c: number, t: string) {\n\n        if (t === 'start' || t === 'finish') return\n        if (t === '4ways') return\n\n        let newIndex: number = -1\n\n        let type = t.charAt(0)\n        let curIndex: number = +t.charAt(1)\n\n        if (type === 'i') newIndex = (curIndex + 1) % 2\n        if (type === 't' || type === 'd') newIndex = (curIndex + 1) % 4\n        // this.board[r][c] = [type, newIndex]\n        let old: Cell[][] = [...this.getBoard()]\n        let rotateCommand: RotateCommand = new RotateCommand(this, old)\n        this.commandManager.execute(rotateCommand)\n\n        // change the type\n        let cell = this.board[r][c]\n        // console.log(type + newIndex + '')\n        // console.log(cell)\n        cell.type = type + newIndex + ''\n        \n    }\n\n    public reset(level: string) {\n\n    }\n\n    public move(r: number, c: number) {\n\n    }\n\n    public hasSolution() {\n        let seen: boolean[][] = []\n        let finishSites = []\n        let q: any[][] = []        // <i, j, distance, type>\n        let cnt = 0\n        for (let i = 0; i < this.R; i ++) {\n            seen.push([])\n            for (let j = 0; j < this.C; j ++) {\n                seen[i].push(false)\n                if (this.board[i][j].type === 'start') {\n                    seen[i][j] = true\n                    q.push([i, j, 0, 'start'])\n                }\n\n                if (this.board[i][j].type === 'finish') {\n                    finishSites.push([i, j])\n                    cnt ++\n                }\n            }\n        }\n\n        let layer = []\n        while (q.length != 0) {\n            let front = q.shift()\n            let [i, j, d, type] = front!\n            if (type === 'finish') cnt -= 1\n            let size = q.length\n            let dirs = this.dirs.get(type)\n            for (const [dx, dy] of dirs!) {\n                let ni = i + dx\n                let nj = j + dy\n                if (this.isWithinBound(ni, nj)) {\n                    let p = this.board[ni][nj].type\n                    let reverseDirs = this.dirs.get(p)!\n                    if ((!seen[ni][nj]) && \n                        (this.board[ni][nj].type !== 'blank') &&\n                        (this.isCompatible(dx, dy, reverseDirs))) {\n                            q.push([ni, nj, d + 1, this.board[ni][nj].type])\n                            layer.push([ni, nj])\n                            seen[ni][nj] = true\n\n                            this.board[ni][nj].isPartPath = true\n                    }\n                }\n            }\n        }\n        return cnt === 0\n    }\n\n    public hasSolutionWrapping() {\n        let seen: boolean[][] = []\n        let finishSites = []\n        let q: any[][] = []        // <i, j, distance, type>\n        for (let i = 0; i < this.R; i ++) {\n            seen.push([])\n            for (let j = 0; j < this.C; j ++) {\n                seen[i].push(false)\n                if (this.board[i][j].type === 'start') {\n                    seen[i][j] = true\n                    q.push([i, j, 0, 'start'])\n                }\n\n                if (this.board[i][j].type === 'finish') {\n                    finishSites.push([i, j])\n                }\n            }\n        }\n\n        let layer = []\n        while (q.length != 0) {\n            let front = q.shift()\n            let [i, j, d, type] = front!\n            let size = q.length\n            let dirs = this.dirs.get(type)\n            for (const [dx, dy] of dirs!) {\n                let ni = (i + dx + this.R) % this.R\n                let nj = (j + dy + this.C) % this.C\n                if (this.isWithinBound(ni, nj)) {\n                    let p = this.board[ni][nj].type\n                    let reverseDirs = this.dirs.get(p)!\n                    if ((!seen[ni][nj]) && \n                        (this.board[ni][nj].type !== 'blank') &&\n                        (this.isCompatible(dx, dy, reverseDirs))) {\n                            q.push([ni, nj, d + 1, this.board[ni][nj].type])\n                            layer.push([ni, nj])\n                            seen[ni][nj] = true\n\n                            this.board[ni][nj].isPartPath = true\n                    }\n                }\n            }\n        }\n\n        return this.win(finishSites, seen)\n    }\n\n    public win(finishSites: number[][], seen: boolean[][]): boolean {\n        if (finishSites.length === 0) return false\n        for (let i = 0; i < finishSites.length; i ++) {\n            let r = finishSites[i][0]\n            let c = finishSites[i][1]\n            if (seen[r][c] === false)\n                return false\n        }\n        return true\n    }\n\n    public generateBoard() {\n\n    }\n\n    public solveBoard(category: string) {\n        console.log('SOLVING')\n        let seen: boolean[][] = []\n        let start = []\n        for (let i = 0; i < this.R; i ++) {\n            seen.push([])\n            for (let j = 0; j < this.C; j ++) {\n                seen[i].push(false)\n                if (this.board[i][j].type === 'start') {\n                    seen[i][j] = true\n                    start.push([i, j])\n                }\n                \n            }\n        }\n\n        if (category === 'classic'){\n            for (const [i, j] of start) {\n                this.backtrack(i, j, seen)\n            }\n        } else{\n            console.log('wrapping is called')\n            for (const [i, j] of start) {\n                this.backtrackWrapping(i, j, seen)\n            } \n        }\n\n        console.log('DONE SOLVING')\n\n    }\n\n    public backtrack(i: number, j: number, seen: boolean[][]) {\n        console.log(i + ' ' + j)\n\n        // check if the configuration can return\n        if (this.hasSolution()) {\n            console.log('a solution exists')\n            let grid: Cell[][] = []\n            for (let r = 0; r < this.R; r ++) {\n                grid[r] = []\n                for (let c = 0; c < this.C; c ++) {\n                    let val = this.board[r][c].deepCopy()\n                    grid[r].push(val)\n                }\n            }\n            this.solutionBoard = grid\n            // this.setBoard(grid)\n            console.log(grid)\n            return true\n        }\n\n        let cell = this.board[i][j]\n        let curType = cell.type\n        let type = curType.charAt(0)\n        let curIndex: number = +curType.charAt(1)\n       // console.log(cell)\n\n\n        // try all rotation\n        if (curType === 'start') {\n            seen[i][j] = true\n            for (const [dx, dy] of [[1, 0], [-1, 0],[0, -1], [0, 1]]) {\n                let ni = i + dx\n                let nj = j + dy\n                if (this.isWithinBound(ni, nj) &&\n                    (this.board[ni][nj].type !== 'blank') &&\n                    (!seen[ni][nj]) &&\n                    (this.board[ni][nj].type !== 'finish')) {\n                        if (this.backtrack(ni, nj, seen))\n                            return true\n\n                }\n            }\n            seen[i][j] = false\n        }\n        \n        else {\n            seen[i][j] = true\n            let end = 0\n            if (type === 'i') end = 2\n            if (type === 't' || type == 'd') end = 4\n            for (let k = 0; k < end; k ++) {\n                let newIndex: number = -1\n                if (type === 'i') newIndex = (curIndex + k) % end\n                if (type === 't' || type === 'd') newIndex = (curIndex + k) % end\n                let temp = type + newIndex\n                this.board[i][j].type = temp\n                for (const [dx, dy] of [[1, 0], [-1, 0],[0, -1], [0, 1]]) {\n                    let ni = i + dx\n                    let nj = j + dy\n                    if (this.isWithinBound(ni, nj) &&\n                        (this.board[ni][nj].type !== 'blank') &&\n                        (!seen[ni][nj]) &&\n                        (this.board[ni][nj].type !== 'finish')) {\n                            if (this.backtrack(ni, nj, seen)) {\n                                return true\n                            }\n                    }\n                }\n            }\n            seen[i][j] = false\n        }\n        return false\n    }\n\n    public backtrackWrapping(i: number, j: number, seen: boolean[][]) {\n\n        // check if the configuration can return\n        if (this.hasSolutionWrapping()) {\n            console.log('a solution exists')\n            let grid: Cell[][] = []\n            for (let r = 0; r < this.R; r ++) {\n                grid[r] = []\n                for (let c = 0; c < this.C; c ++) {\n                    let val = this.board[r][c].deepCopy()\n                    grid[r].push(val)\n                }\n            }\n            this.solutionBoard = grid\n            console.log(grid)\n            return true\n        }\n        let cell = this.board[i][j]\n        let curType = cell.type\n        let type = curType.charAt(0)\n        let curIndex: number = +curType.charAt(1)\n\n        // try all dirs\n        if (curType === 'start') {\n            for (const [dx, dy] of [[1, 0], [-1, 0],[0, -1], [0, 1]]) {\n                let ni = (i + dx + this.R) % this.R\n                let nj = (j + dy + this.C) % this.C\n                if (this.isWithinBound(ni, nj) &&\n                    (this.board[ni][nj].type !== 'blank') &&\n                    (!seen[ni][nj])) {\n                        seen[ni][nj] = true\n                        if (this.backtrackWrapping(ni, nj, seen))\n                            return true\n                        seen[ni][nj] = false\n                }\n            }\n        }\n        \n        else if (curType === 'finish') { return }\n        else {\n            for (let k = 0; k < 5; k ++) {\n                let newIndex: number = -1\n                if (type === 'i') newIndex = (curIndex + k) % 2\n                if (type === 't' || type === 'd') newIndex = (curIndex + k) % 4\n                this.board[i][j].type = type + newIndex + ''\n                for (const [dx, dy] of [[1, 0], [-1, 0],[0, -1], [0, 1]]) {\n                    let ni = (i + dx + this.R) % this.R\n                    let nj = (j + dy + this.C) % this.C\n                    if (this.isWithinBound(ni, nj) &&\n                        (this.board[ni][nj].type !== 'blank') &&\n                        (!seen[ni][nj])) {\n                            seen[ni][nj] = true\n                            if (this.backtrackWrapping(ni, nj, seen)) {\n                                return true\n                            }\n                            seen[ni][nj] = false\n                    }\n                }\n            }\n        }\n        return false\n    }\n\n    public minBFS() {\n        let seen: boolean[][] = []\n        let q: any[][] = []        // <i, j, distance, type>\n        for (let i = 0; i < this.R; i ++) {\n            seen.push([])\n            for (let j = 0; j < this.C; j ++) {\n                seen[i].push(false)\n                if (this.board[i][j].type === 'start') {\n                    seen[i][j] = true\n                    q.push([i, j, 0, 'start'])\n                }\n            }\n        }\n        // console.log(`starting position: ${q[0]}`)\n\n        while (q.length != 0) {\n            console.log(`processing: ${q[0]}`)\n            let front = q.shift()\n            let [i, j, d, type] = front!\n            // let dirs = this.dirs.get(type)\n            if (type === 'finish') {\n                console.log(`rotation needed is: ${d}`)\n                break\n            }\n\n            let newIndex = -1\n            let t = type.charAt(0)\n            let curIndex: number = +type.charAt(1)\n            let rotations = 1\n            if (t === 'i') rotations = 2\n            if (t === 't' || t === 'd') rotations = 4\n            if (type === 'start' || type === 'finish') rotations = 1\n            if (type === '4ways') rotations = 1\n            for (let i = 0; i < rotations; i ++) {\n                newIndex = (curIndex + i) % rotations\n                let newType: string = ''\n                var dirs: number[][]\n                if (t === 'i' || t === 't' || t === 'd') {\n                    dirs = this.dirs.get(t + newIndex + '')!\n                    newType = t + newIndex + ''\n                }\n                else {\n                    dirs = this.dirs.get(type)!\n                    newType = type\n                }\n                for (const [dx, dy] of dirs!) {\n                    let ni = i + dx\n                    let nj = j + dy\n                    if (this.isWithinBound(ni, nj) && (!seen[ni][nj]) && (this.board[ni][nj].type !== 'blank')) {\n                        let p = this.board[ni][nj].type\n                        let reverseDirs = this.dirs.get(p)!\n                        if (this.isCompatible(dx, dy, reverseDirs)) {\n                            console.log('a')\n                            q.unshift([ni, nj, d, this.board[ni][nj].type])\n                            seen[ni][nj] = true\n                        } else {\n                            console.log('b')\n                            q.push([ni, nj, d + 1, this.board[ni][nj].type])\n                            seen[ni][nj] = true\n                        }\n                    }\n                }\n            }\n        }\n        console.log('done solving')\n        // return layer\n    }\n\n\n    public isWithinBound(i: number, j: number) {\n        if (i >= 0 && i < this.R && j >= 0 && j < this.C)\n            return true\n        return false\n    }\n\n    public setBoard(newBoard: Cell[][]) {\n        this.board = newBoard\n    }\n\n    public getBoard() {\n        return this.board\n    }\n\n    public getLevels() {\n        return this.levels\n    }\n\n    public getCommandManager(): CommandManager {\n        return this.commandManager\n    }\n\n    public getSolutionBoard() {\n        return this.solutionBoard\n    }\n\n}","import { runInThisContext } from \"vm\";\nimport { Cell } from \"../game/Cell\";\nimport { Player } from \"../game/sokoban/player\";\nimport { Sokoban } from \"../game/sokoban/Sokoban\";\nimport { SokobanCell } from \"../game/sokoban/SokobanCell\";\nimport { ICommand } from \"./ICommand\";\n\nexport class SokobanMoveCommand implements ICommand {\n\n    private game: Sokoban\n    private curGrid: SokobanCell[][]\n    private playerX: number\n    private playerY: number\n    private player: Player\n\n\n    constructor(game: Sokoban, grid: SokobanCell[][], player: Player) {\n        this.game = game\n        this.curGrid = []\n\n        for (let i = 0; i < grid.length; i ++) {\n            this.curGrid[i] = []\n            for (let j = 0; j < grid[i].length; j ++) {\n                this.curGrid[i].push(grid[i][j].deepCopy())\n            }\n        }\n\n        this.playerX = player.getX()\n        this.playerY = player.getY()\n        this.player = player\n    }\n\n    public execute() {\n        let board = this.game.getBoard()\n        for (let i = 0; i < board.length; i ++) {\n            for (let j = 0; j < board[i].length; j ++) {\n                let cell = board[i][j]\n                cell.setI(this.curGrid[i][j].getI())\n                cell.setJ(this.curGrid[i][j].getJ())\n                cell.setType(this.curGrid[i][j].getType())\n                cell.setIsBox(this.curGrid[i][j].getIsBox())\n                cell.setIsPlayer(this.curGrid[i][j].getIsPlayer())\n            }\n        }\n\n        // this.game.setBoard(this.curGrid)\n        this.player.setX(this.playerX)\n        this.player.setY(this.playerY)\n        // this.game.setPlayer(new Player(this.playerX, this.playerY))\n    }\n\n    public undo() {\n        let stk = this.game.getCommandManager().undoStk\n        let last = stk.length - 1\n        if (last >= 0) {\n            console.log(stk[last])\n            stk[last].execute()\n        }\n    }\n\n    public redo() {\n        // this.game.setBoard(this.curGrid)\n        let board = this.game.getBoard()\n        for (let i = 0; i < board.length; i ++) {\n            for (let j = 0; j < board[i].length; j ++) {\n                let cell = board[i][j]\n                cell.setI(this.curGrid[i][j].getI())\n                cell.setJ(this.curGrid[i][j].getJ())\n                cell.setType(this.curGrid[i][j].getType())\n                cell.setIsBox(this.curGrid[i][j].getIsBox())\n                cell.setIsPlayer(this.curGrid[i][j].getIsPlayer())\n            }\n        }\n        // this.game.setPlayer(new Player(this.playerX, this.playerY))\n        this.player.setX(this.playerX)\n        this.player.setY(this.playerY)\n    }\n\n    public getStateBoard() {\n        return this.curGrid\n    }\n\n}","export class Player {\n    private x: number\n    private y: number\n\n    constructor(initX: number, initY: number) {\n        this.x = initX\n        this.y = initY\n    }\n\n    public setX(x: number) {\n        this.x = x\n    }\n\n    public setY(y: number) {\n        this.y = y\n    }\n\n    public getX() { return this.x }\n\n    public getY() { return this. y }\n}","export class SokobanCell {\n    private i: number\n    private j: number\n    public type: string\n\n    private isPlayer: boolean\n    private isBox: boolean\n\n\n    constructor(i: number, j: number, type: string, isPlayer: boolean, isBox: boolean) {\n        this.i = i\n        this.j = j\n        this.type = type \n\n        \n        this.isPlayer = isPlayer\n        this.isBox = isBox\n\n    }\n\n    public deepCopy() {\n        return new SokobanCell(\n            this.i,\n            this.j,\n            this.type,\n            this.isPlayer,\n            this.isBox\n        )\n    }\n\n    public setIsPlayer(bool: boolean) {\n        this.isPlayer = bool\n    }\n\n    public setIsBox(bool: boolean) {\n        this.isBox = bool\n    }\n\n    public setI(i: number) { this.i = i }\n    public setJ(j: number) { this.j = j }\n    public setType(type: string) { this.type = type }\n\n    public getIsPlayer() { return this.isPlayer }\n    public getIsBox() { return this.isBox }\n    public getI() { return this.i }\n    public getJ() { return this.j }\n    public getType() { return this. type }\n}","export class SokobanLevel {\n\n    private levelName: string\n    private baseLayer: string[][]\n    private boxesPos: number[][]\n    private playerPos: number[][]\n    private numBoxes: number\n\n    constructor(levelName: string, baseLayer: string[][], boxesPos: number[][], playerPos: number[][], numBoxes: number) {\n        this.levelName = levelName\n        this.baseLayer = baseLayer\n        this.boxesPos = boxesPos\n        this.playerPos = playerPos\n        this.numBoxes = numBoxes\n    }\n\n    public setBaseLayer(layer: string[][]) { this.baseLayer = layer }\n    public setBoxesPos(boxesPos: number[][]) { this.boxesPos = boxesPos }\n    public setPlayerPos(playerPos: number[][]) { this.playerPos = playerPos }\n\n    public getBaseLayer() { return this.baseLayer }\n    public getBoxesPos() { return this.boxesPos }\n    public getPlayerPos() { return this.playerPos }\n    public getLevelName() { return this.levelName }\n    public getNumBoxes() { return this.numBoxes }\n\n}","import { request } from \"http\"\nimport { SokobanLevel } from \"./SokobanLevel\"\n\nexport class SokobanLevelManager {\n\n    private curLevel: string\n    private levels: Map<string, SokobanLevel>\n\n    constructor() {\n        this.curLevel = '1'\n        this.levels = new Map()\n        \n        let level1 = new SokobanLevel(\n            'level1',\n        [\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'w'],\n            ['w', 'w', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'w'],\n            ['w', 'w', 'g', 'g', 'g', 'w', 'w', 'g', 'g', 'w'],\n            ['w', 'w', 'g', 'g', 'g', 'e', 'e', 'g', 'w', 'w'],\n            ['w', 'w', 'g', 'g', 'g', 'g', 'w', 'g', 'g', 'w'],\n            ['w', 'w', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'w'],\n            ['w', 'w', 'w', 'g', 'g', 'g', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'g', 'g', 'g', 'g', 'g', 'g', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w']\n        ],\n        [\n            [5, 3],\n            [3, 3],\n        ],\n        [\n            [5, 5]\n        ]\n        ,\n            2\n        )\n\n        let level2 = new SokobanLevel(\n            'level2',\n        [\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'w', 'w', 'g', 'g', 'w'],\n            ['w', 'w', 'w', 'w', 'g', 'g', 'g', 'g', 'w', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'g', 'w', 'g', 'g', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'w'],\n            ['w', 'w', 'w', 'g', 'g', 'g', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'g', 'g', 'g', 'g', 'g', 'g', 'w'],\n            ['w', 'w', 'w', 'g', 'w', 'w', 'w', 'w', 'w', 'w']\n        ],\n        [\n            [2, 3],\n            [2, 2],\n        ],\n        [\n            [5, 5]\n        ],\n            2\n        )\n\n\n        let level3 = new SokobanLevel(\n            'level3',\n        [\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'e', 'g', 'g', 'g', 'g', 'g', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'w', 'w', 'g', 'g', 'w'],\n            ['w', 'w', 'w', 'g', 'g', 'w', 'g', 'g', 'w', 'w'],\n            ['w', 'w', 'g', 'g', 'g', 'g', 'w', 'g', 'w', 'w'],\n            ['w', 'w', 'g', 'g', 'g', 'g', 'g', 'g', 'w', 'w'],\n            ['w', 'w', 'g', 'g', 'g', 'g', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'g', 'g', 'g', 'g', 'g', 'g', 'e', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w']\n        ],\n        [\n            [3, 3],\n            [2, 2],\n        ],\n        [\n            [6, 5]\n        ],\n            2\n        )\n\n\n\n        let level4 = new SokobanLevel(\n            'level4',\n        [\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'g', 'g', 'w', 'w', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'w', 'w', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'w', 'w', 'w', 'w'],\n            ['w', 'g', 'w', 'g', 'w', 'g', 'g', 'w', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'w', 'w', 'w', 'w'],\n            ['w', 'e', 'w', 'g', 'g', 'g', 'g', 'w', 'w', 'w'],\n            ['w', 'e', 'w', 'g', 'g', 'g', 'w', 'w', 'w', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'g', 'g', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w']\n        ],\n        [\n            [5, 3],\n            [4, 3],\n            [3, 3]\n        ],\n        [\n            [6, 5]\n        ],\n            3\n        )\n\n        let level5 = new SokobanLevel(\n            'level5',\n        [\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'g', 'g', 'w', 'w', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'w', 'w', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'w', 'w', 'w', 'w'],\n            ['w', 'g', 'w', 'g', 'w', 'g', 'g', 'w', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'g', 'w', 'w', 'w'],\n            ['w', 'e', 'w', 'w', 'w', 'g', 'g', 'w', 'w', 'w'],\n            ['w', 'e', 'w', 'w', 'w', 'w', 'g', 'w', 'w', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'g', 'g', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w']\n        ],\n        [\n            [5, 3],\n            [4, 3],\n            [3, 3]\n        ],\n        [\n            [8, 2]\n        ],\n            3\n        )\n\n        let level6 = new SokobanLevel(\n            'level6',\n        [\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'g', 'e', 'g', 'e', 'g', 'e', 'g', 'g', 'w'],\n            ['w', 'g', 'w', 'g', 'w', 'g', 'w', 'g', 'g', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'w'],\n            ['w', 'g', 'w', 'w', 'w', 'g', 'g', 'g', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'w', 'w'],\n            ['w', 'g', 'w', 'w', 'w', 'g', 'g', 'g', 'w', 'w'],\n            ['w', 'g', 'w', 'w', 'w', 'w', 'g', 'w', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'g', 'e', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w']\n        ],\n        [\n            [3, 6],\n            [3, 4],\n            [3, 2],\n            [5, 5]\n        ],\n        [\n            [8, 2]\n        ],\n            4\n        )\n\n        let level7 = new SokobanLevel(\n            'level7',\n        [\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'e', 'w', 'g', 'g', 'g', 'g', 'w', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'w', 'g', 'w', 'w', 'w'],\n            ['w', 'g', 'w', 'g', 'g', 'g', 'g', 'w', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'g', 'w', 'w', 'w'],\n            ['w', 'w', 'g', 'g', 'g', 'g', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'e', 'w', 'e', 'g', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'g', 'g', 'g', 'g', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w']\n        ],\n        [\n            [5, 4],\n            [3, 4],\n            [4, 4],\n        ],\n        [\n            [8, 2]\n        ],\n            3\n        )\n\n        let level8 = new SokobanLevel(\n            'level8',\n        [\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'g', 'g', 'e', 'w', 'w'],\n            ['w', 'g', 'w', 'g', 'g', 'g', 'w', 'g', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'w', 'w'],\n            ['w', 'g', 'w', 'g', 'g', 'g', 'w', 'g', 'w', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'g', 'g', 'e', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w']\n        ],\n        [\n            [5, 3],\n            [5, 5],\n            [4, 4],\n            [6, 4]\n        ],\n        [\n            [5, 4]\n        ],\n            4\n        )\n\n\n        let level9 = new SokobanLevel(\n            'level9',\n        [\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'g', 'g', 'e', 'w', 'w'],\n            ['w', 'g', 'w', 'g', 'g', 'g', 'w', 'g', 'w', 'w'],\n            ['w', 'g', 'w', 'g', 'g', 'g', 'w', 'g', 'w', 'w'],\n            ['w', 'g', 'w', 'g', 'g', 'g', 'w', 'g', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'w', 'w'],\n            ['w', 'g', 'w', 'g', 'w', 'g', 'w', 'g', 'w', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'g', 'g', 'e', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w']\n        ],\n        [\n            [5, 3],\n            [5, 5],\n            [4, 4],\n            [6, 4]\n        ],\n        [\n            [5, 4]\n        ],\n            4\n        )\n\n        let level10 = new SokobanLevel(\n            'level10',\n        [\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'g', 'g', 'g', 'e', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'g', 'g', 'g', 'e', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'g', 'g', 'g', 'e', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w']\n        ],\n        [\n            [5, 4],\n            [4, 4],\n            [3, 4],\n            [4, 3],\n            [4, 2],\n            [4, 5]\n        ],\n        [\n            [5, 3]\n        ],\n            6\n        )\n\n        let level11 = new SokobanLevel(\n            'level11',\n        [\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'e', 'g', 'w', 'g', 'g', 'g', 'g', 'g', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'g', 'g', 'g', 'e', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'g', 'g', 'w', 'e', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'e', 'w'],\n            ['w', 'g', 'g', 'w', 'g', 'g', 'w', 'g', 'e', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w']\n        ],\n        [\n            [5, 4],\n            [4, 4],\n            [3, 4],\n            [4, 3],\n            [4, 2],\n            [4, 5],\n            [6, 2],\n            [5, 2]\n        ],\n        [\n            [5, 3]\n        ],\n            8\n        )\n\n        let level12 = new SokobanLevel(\n            'level12',\n        [\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'g', 'g', 'g', 'e', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'g', 'g', 'g', 'e', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w']\n        ],\n        [\n            [4, 2],\n            [4, 3],\n            [4, 4],\n            [4, 5],\n        ],\n        [\n            [4, 1]\n        ],\n            4\n        )\n\n        let level13 = new SokobanLevel(\n            'level13',\n        [\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'e', 'g', 'g', 'g', 'w', 'w', 'w', 'w', 'w'],\n            ['w', 'g', 'g', 'g', 'g', 'g', 'g', 'g', 'w', 'w'],\n            ['w', 'w', 'g', 'g', 'g', 'g', 'g', 'g', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'g', 'g', 'g', 'g', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'g', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'e', 'w', 'w'],\n            ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w']\n        ],\n        [\n            [4, 2],\n            [4, 3],\n        ],\n        [\n            [4, 1]\n        ],\n            2\n        )\n\n\n\n        this.levels.set('1', level1)\n        this.levels.set('2', level2)\n        this.levels.set('3', level3)\n        this.levels.set('4', level4)\n        this.levels.set('5', level5)\n        this.levels.set('6', level6)\n        this.levels.set('7', level7)\n        this.levels.set('8', level8)\n        this.levels.set('9', level9)\n        this.levels.set('10', level10)\n        this.levels.set('11', level11)\n        this.levels.set('12', level12)\n        this.levels.set('13', level13)\n\n\n        \n    }\n\n    public setCurLevel(level: string) { this.curLevel = level } \n    public getCurLevel() { return this.curLevel } \n    public getLevels() { return this.levels }\n\n    public getLevel(requestedLevel: string) {\n        \n        if (requestedLevel !== undefined || requestedLevel !== null) {\n            return this.levels.get(requestedLevel)\n        }\n        return \n    }\n}","import { dirxml } from \"console\"\nimport { stringify } from \"querystring\"\nimport { HighlightSpanKind } from \"typescript\"\nimport { CommandManager } from \"../../ds/CommandManager\"\nimport { RotateCommand } from \"../../ds/RotateCommand\"\nimport { SokobanMoveCommand } from \"../../ds/SokobanMoveCommand\"\nimport { Cell } from \"../Cell\"\nimport { LevelManager } from \"../LevelManager\"\nimport { Player } from \"./player\"\nimport { SokobanCell } from \"./SokobanCell\"\nimport { SokobanLevel } from \"./SokobanLevel\"\nimport { SokobanLevelManager } from \"./SokobanLevelManager\"\n\nexport class Sokoban {\n    \n    private board: SokobanCell[][]\n    private R: number\n    private C: number\n\n    private levelManager: SokobanLevelManager\n    private commandManager: CommandManager\n    private levels: Map<string, SokobanLevel>\n\n    private dirs: Map<string, number[]>\n    private player: Player\n\n    private numberOfBoxes: number\n    // private playerCoord: [number, number]\n\n\n    constructor(row: number, col: number) {\n        this.numberOfBoxes = -1\n        this.commandManager = new CommandManager()\n        this.levelManager = new SokobanLevelManager()\n        this.levels = this.levelManager.getLevels()\n\n        this.dirs = new Map()\n        this.dirs.set(\"w\", [-1, 0])\n        this.dirs.set(\"s\", [1, 0])\n        this.dirs.set(\"a\", [0, -1])\n        this.dirs.set(\"d\", [0, 1])\n\n        // init board\n        this.board = []\n        this.R = row\n        this.C = col\n        for (let i = 0; i < row; i ++) {\n            this.board[i] = []\n            for (let j = 0; j < col; j ++) {\n                let node = new SokobanCell(i, j, 'g', false, false)\n                this.board[i].push(node)\n            }\n        }\n        this.player = new Player(0, 0)\n\n        let command: SokobanMoveCommand = new SokobanMoveCommand(this, this.getBoard(), this.player)\n        this.commandManager.execute(command)\n    }\n\n    public loadLevel(requestedLevel: string) {\n        \n        let level: SokobanLevel = this.levelManager.getLevel(requestedLevel)!\n        if (level === undefined || level === null) return\n\n        this.levelManager.setCurLevel(requestedLevel)\n        let base = level.getBaseLayer()\n        let boxesPos = level.getBoxesPos()\n        let playerPos = level.getPlayerPos()\n\n        this.numberOfBoxes = level.getNumBoxes()\n        \n        for (let i = 0; i < this.board.length; i ++) {\n            for (let j = 0; j < this.board[i].length; j ++) {\n                this.board[i][j] = new SokobanCell(i, j, base[i][j], false, false)\n            }\n        }\n\n        for (let i = 0; i < boxesPos.length; i ++) {\n            let r = boxesPos[i][0]\n            let c = boxesPos[i][1]\n            this.board[r][c].setIsBox(true)\n        }\n\n        let playerX = playerPos[0][0]\n        let playerY = playerPos[0][1]\n        this.player.setX(playerX)\n        this.player.setY(playerY)\n        this.board[playerX][playerY].setIsPlayer(true)\n\n        this.commandManager = new CommandManager()\n    }\n\n    public canMove(dir: string) {\n\n\n        let playerX = this.player.getX()\n        let playerY = this.player.getY()\n        \n        let tmp = this.dirs.get(dir)!\n        if (tmp === undefined || tmp === null) return [false, false]\n\n        let dx = tmp[0]\n        let dy = tmp[1]\n\n        let newX = playerX + dx\n        let newY = playerY + dy\n\n        if (this.board[newX][newY].getIsBox()) {\n            let nr = newX + dx\n            let nc = newY + dy\n            if (this.board[nr][nc].getIsBox()) return [false, false]\n            else if (this.board[nr][nc].type === 'w') return [false, false]\n            else if (this.board[nr][nc].type === 'e') return [true, true]\n            else if (this.board[nr][nc].type === 'g') return [true, true] \n        }\n        else if (this.board[newX][newY].type === 'w') return [false, false]\n        else if (this.board[newX][newY].type === 'e') return [true, false]\n        else if (this.board[newX][newY].type === 'g') return [true, false]\n        return [false, false]\n    }\n\n    public movePlayer(dir: string) {\n        let tmp = this.dirs.get(dir)!\n        if (tmp === undefined || tmp === null) return false\n        let dx = tmp[0]\n        let dy = tmp[1]\n\n        // move the player\n        let curPlayerX = this.player.getX()\n        let curPlayerY = this.player.getY()\n        let newPlayerX = curPlayerX + dx\n        let newPlayerY = curPlayerY + dy\n        this.board[curPlayerX][curPlayerY].setIsPlayer(false)\n        this.board[newPlayerX][newPlayerY].setIsPlayer(true)\n        this.player.setX(newPlayerX)\n        this.player.setY(newPlayerY)\n    }\n\n\n\n    public moveBox(dir: string) {\n        let tmp = this.dirs.get(dir)!\n        if (tmp === undefined || tmp === null) return false\n        let dx = tmp[0]\n        let dy = tmp[1]\n\n        // move the player\n        let curPlayerX = this.player.getX()\n        let curPlayerY = this.player.getY()\n        let newPlayerX = curPlayerX + dx\n        let newPlayerY = curPlayerY + dy\n        this.board[curPlayerX][curPlayerY].setIsPlayer(false)\n        this.board[newPlayerX][newPlayerY].setIsPlayer(true)\n        this.player.setX(newPlayerX)\n        this.player.setY(newPlayerY)\n\n        // move the box\n        let newBoxX = curPlayerX + 2 * dx\n        let newBoxY = curPlayerY + 2 * dy\n        this.board[newPlayerX][newPlayerY].setIsBox(false)\n        this.board[newBoxX][newBoxY].setIsBox(true)\n    }\n\n    public hasWon(): boolean {\n        var cnt = 0\n        for (let i = 0; i < this.board.length; i ++) {\n            for (let j = 0; j < this.board[i].length; j ++) {\n                let cell = this.board[i][j]\n                let isBox = cell.getIsBox()\n                let type = cell.getType()\n                if (type === 'e' && isBox === true) {\n                    cnt += 1\n                }\n            }\n        }\n        return cnt === this.numberOfBoxes\n    }\n\n    public undo() {\n        this.commandManager.undo()\n\n    }\n\n    public redo() {\n        this.commandManager.redo()\n    }\n\n    \n    public isWithinBound(i: number, j: number) {\n        if (i >= 0 && i < this.R && j >= 0 && j < this.C)\n            return true\n        return false\n    }\n\n    public setBoard(newBoard: SokobanCell[][]) {\n        this.board = newBoard\n    }\n\n    public getBoard() {\n        return this.board\n    }\n\n    public getLevels() {\n        return this.levels\n    }\n\n    public getCommandManager(): CommandManager {\n        return this.commandManager\n    }\n\n    public getLevelManger() {\n        return this.levelManager\n    }\n\n    public getPlayer() {\n        return this.player\n    }\n\n    public setPlayer(player: Player) {\n        this.player = player\n    }\n\n}","import { runInThisContext } from \"vm\";\nimport { Cell } from \"../game/Cell\";\nimport { Inertia } from \"../game/inertia/Inertia\";\nimport { InertiaCell } from \"../game/inertia/InertiaCell\";\nimport { Player } from \"../game/sokoban/player\";\nimport { ICommand } from \"./ICommand\";\n\nexport class InertiaMoveCommand implements ICommand {\n\n    private game: Inertia\n    private curGrid: InertiaCell[][]\n    private playerX: number\n    private playerY: number\n    private player: Player\n\n\n    constructor(game: Inertia, grid: InertiaCell[][], player: Player) {\n        this.game = game\n        this.curGrid = []\n\n        for (let i = 0; i < grid.length; i ++) {\n            this.curGrid[i] = []\n            for (let j = 0; j < grid[i].length; j ++) {\n                this.curGrid[i].push(grid[i][j].deepCopy())\n            }\n        }\n\n        this.playerX = player.getX()\n        this.playerY = player.getY()\n        this.player = player\n    }\n\n    public execute() {\n        console.log('executing')\n        let board = this.game.getBoard()\n        for (let i = 0; i < board.length; i ++) {\n            for (let j = 0; j < board[i].length; j ++) {\n                let cell = board[i][j]\n                cell.setI(this.curGrid[i][j].getI())\n                cell.setJ(this.curGrid[i][j].getJ())\n                cell.setType(this.curGrid[i][j].getType())\n                cell.setIsBomb(this.curGrid[i][j].getIsBomb())\n                cell.setIsGem(this.curGrid[i][j].getIsGem())\n                cell.setIsBrokenCircle(this.curGrid[i][j].getIsBrokenCircle())\n                cell.setIsGround(this.curGrid[i][j].getIsGround())\n                cell.setIsWall(this.curGrid[i][j].getIsWall())\n                cell.setIsPlayer(this.curGrid[i][j].getIsPlayer())\n            }\n        }\n\n        // this.game.setBoard(this.curGrid)\n        this.player.setX(this.playerX)\n        this.player.setY(this.playerY)\n        // this.game.setPlayer(new Player(this.playerX, this.playerY))\n    }\n\n    public undo() {\n        let stk = this.game.getCommandManager().undoStk\n        let last = stk.length - 1\n        if (last >= 0) {\n            console.log(stk[last])\n            stk[last].execute()\n        }\n    }\n\n    public redo() {\n        // this.game.setBoard(this.curGrid)\n        let board = this.game.getBoard()\n        for (let i = 0; i < board.length; i ++) {\n            for (let j = 0; j < board[i].length; j ++) {\n                let cell = board[i][j]\n                cell.setI(this.curGrid[i][j].getI())\n                cell.setJ(this.curGrid[i][j].getJ())\n                cell.setType(this.curGrid[i][j].getType())\n                cell.setIsBomb(this.curGrid[i][j].getIsBomb())\n                cell.setIsGem(this.curGrid[i][j].getIsGem())\n                cell.setIsBrokenCircle(this.curGrid[i][j].getIsBrokenCircle())\n                cell.setIsGround(this.curGrid[i][j].getIsGround())\n                cell.setIsWall(this.curGrid[i][j].getIsWall())\n                cell.setIsPlayer(this.curGrid[i][j].getIsPlayer())\n            }\n        }\n        // this.game.setPlayer(new Player(this.playerX, this.playerY))\n        this.player.setX(this.playerX)\n        this.player.setY(this.playerY)\n    }\n\n    public getStateBoard() {\n        return this.curGrid\n    }\n\n}","export class InertiaCell {\n    private i: number\n    private j: number\n    public type: string\n\n    private isGem: boolean\n    private isBrokenCircle: boolean\n    private isPlayer: boolean\n    private isWall: boolean\n    private isBomb: boolean\n    private isGround: boolean\n\n    constructor(i: number, j: number, type: string, isPlayer: boolean, isWall: boolean,\n                isGem: boolean, isBrokeCircle: boolean, isBomb: boolean, isGround: boolean\n        ) {\n        this.i = i\n        this.j = j\n        this.type = type \n\n        \n        this.isPlayer = isPlayer\n        this.isWall = isWall\n        this.isGem = isGem\n        this.isBomb = isBomb\n        this.isBrokenCircle = isBrokeCircle\n        this.isGround = isGround\n    }\n\n    public deepCopy() {\n        return new InertiaCell(\n            this.i,\n            this.j,\n            this.type,\n            this.isPlayer,\n            this.isWall,\n            this.isGem,\n            this.isBrokenCircle,\n            this.isBomb,\n            this.isGround\n        )\n    }\n\n    public setIsPlayer(bool: boolean) {\n        this.isPlayer = bool\n    }\n\n    public setIsWall(isWall: boolean) {\n        this.isWall = isWall\n    }\n\n    public setI(i: number) { this.i = i }\n    public setJ(j: number) { this.j = j }\n    public setType(type: string) { this.type = type }\n    public setIsGem(isGem: boolean) { this.isGem = isGem }\n    public setIsBomb(isBomb: boolean) { this.isBomb = isBomb }\n    public setIsBrokenCircle(isBrokenCircle: boolean) { this.isBrokenCircle = isBrokenCircle }\n    public setIsGround(isGround: boolean) { this.isGround = isGround}\n\n    public getIsPlayer() { return this.isPlayer }\n    public getIsWall() { return this.isWall }\n    public getIsGem() { return this.isGem }\n    public getIsBomb() { return this.isBomb }\n    public getIsGround() { return this.isGround }\n    public getIsBrokenCircle() { return this.isBrokenCircle}\n    public getI() { return this.i }\n    public getJ() { return this.j }\n    public getType() { return this. type }\n\n    public toString = () : string => {\n        return `${this.i}, ${this.j}: ${this.isPlayer}`\n    }\n}","export class InertiaLevel {\n\n    private levelName: string\n    private baseLayer: string[][]\n    private playerPos: number[]\n    private numGems: number\n\n    constructor(levelName: string, baseLayer: string[][], playerPos: number[], numGems: number) {\n        this.levelName = levelName\n        this.baseLayer = baseLayer\n        this.playerPos = playerPos\n        this.numGems = numGems\n    }\n\n    public setNumGems(numGems: number) { this.numGems = numGems }\n    public setBaseLayer(layer: string[][]) { this.baseLayer = layer }\n    public setPlayerPos(playerPos: number[]) { this.playerPos = playerPos }\n\n    public getBaseLayer() { return this.baseLayer }\n    public getPlayerPos() { return this.playerPos }\n    public getLevelName() { return this.levelName }\n    public getNumGems() { return this.numGems }\n\n}","import { InertiaLevel } from \"./InertiaLevel\"\n\nexport class InertiaLevelManager {\n\n    private curLevel: string\n    private levels: Map<string, InertiaLevel>\n\n    constructor() {\n        this.curLevel = '1'\n        this.levels = new Map()\n\n        const level1 = new InertiaLevel(\n            '1',\n            [\n                ['g', 'g', 'c', 'j', 'j', 'g', 'c', 'j', 'w', 'g'],\n                ['g', 'g', 'j', 'g', 'j', 'g', 'g', 'g', 'g', 'w'],\n                ['g', 'g', 'g', 'g', 'j', 'g', 'g', 'g', 'g', 'c'],\n                ['c', 'j', 'g', 'g', 'c', 'w', 'g', 'g', 'g', 'g'],\n                ['c', 'j', 'c', 'w', 'b', 'g', 'g', 'g', 'w', 'c'],\n                ['j', 'j', 'c', 'g', 'b', 'g', 'g', 'c', 'c', 'j'],\n                ['j', 'j', 'c', 'c', 'j', 'c', 'g', 'g', 'g', 'j'],\n                ['j', 'g', 'w', 'c', 'j', 'c', 'w', 'g', 'b', 'j'],\n                ['j', 'g', 'j', 'g', 'j', 'w', 'g', 'g', 'g', 'j'],\n                ['j', 'j', 'j', 'g', 'j', 'g', 'j', 'w', 'g', 'g']\n            ],\n            [0, 0],\n            5\n        )\n\n        \n        const level2 = new InertiaLevel(\n            '2',\n            [\n                ['j', 'g', 'c', 'g', 'g', 'w', 'j', 'j', 'g', 'g'],\n                ['c', 'g', 'j', 'g', 'j', 'g', 'c', 'g', 'g', 'w'],\n                ['g', 'j', 'g', 'g', 'j', 'g', 'g', 'g', 'g', 'c'],\n                ['c', 'j', 'g', 'g', 'c', 'w', 'w', 'g', 'g', 'g'],\n                ['c', 'g', 'c', 'w', 'b', 'g', 'g', 'g', 'w', 'c'],\n                ['c', 'w', 'c', 'g', 'b', 'g', 'w', 'c', 'c', 'j'],\n                ['g', 'g', 'c', 'c', 'j', 'c', 'g', 'g', 'g', 'j'],\n                ['j', 'j', 'w', 'c', 'j', 'c', 'w', 'g', 'b', 'j'],\n                ['g', 'j', 'j', 'g', 'j', 'w', 'g', 'g', 'g', 'j'],\n                ['j', 'j', 'j', 'g', 'j', 'g', 'j', 'w', 'g', 'g']\n            ],\n            [5, 5],\n            5\n        )\n\n        const level3 = new InertiaLevel(\n            '3',\n            [\n                ['j', 'g', 'c', 'g', 'g', 'w', 'j', 'j', 'g', 'g'],\n                ['c', 'g', 'j', 'g', 'j', 'g', 'c', 'g', 'c', 'w'],\n                ['g', 'j', 'g', 'g', 'j', 'g', 'g', 'w', 'g', 'c'],\n                ['c', 'j', 'g', 'g', 'c', 'w', 'j', 'c', 'g', 'g'],\n                ['c', 'g', 'c', 'w', 'b', 'g', 'g', 'g', 'w', 'c'],\n                ['c', 'w', 'c', 'g', 'b', 'c', 'w', 'c', 'c', 'j'],\n                ['g', 'g', 'c', 'c', 'g', 'c', 'g', 'g', 'g', 'j'],\n                ['j', 'j', 'w', 'c', 'g', 'c', 'w', 'g', 'b', 'j'],\n                ['g', 'j', 'j', 'g', 'j', 'c', 'j', 'g', 'g', 'j'],\n                ['j', 'j', 'j', 'g', 'j', 'g', 'j', 'w', 'g', 'g']\n            ],\n            [1, 1],\n            5\n        )\n\n        const level4 = new InertiaLevel(\n            '4',\n            [\n                ['j', 'g', 'c', 'g', 'g', 'w', 'j', 'j', 'g', 'g'],\n                ['c', 'g', 'j', 'g', 'j', 'g', 'c', 'b', 'c', 'w'],\n                ['g', 'j', 'g', 'c', 'j', 'g', 'g', 'w', 'g', 'c'],\n                ['w', 'w', 'w', 'j', 'c', 'w', 'j', 'c', 'g', 'g'],\n                ['w', 'g', 'c', 'j', 'g', 'g', 'g', 'g', 'w', 'c'],\n                ['w', 'w', 'w', 'j', 'b', 'c', 'w', 'c', 'c', 'c'],\n                ['w', 'g', 'c', 'g', 'g', 'j', 'g', 'g', 'g', 'j'],\n                ['j', 'j', 'b', 'c', 'b', 'j', 'w', 'b', 'b', 'j'],\n                ['j', 'c', 'j', 'g', 'j', 'c', 'b', 'g', 'g', 'j'],\n                ['j', 'j', 'j', 'g', 'j', 'g', 'j', 'w', 'g', 'g']\n            ],\n            [1, 3],\n            5\n        )\n\n        const level5 = new InertiaLevel(\n            '5',\n            [\n                ['j', 'g', 'c', 'b', 'g', 'w', 'j', 'j', 'g', 'b'],\n                ['c', 'g', 'j', 'g', 'j', 'j', 'c', 'b', 'c', 'w'],\n                ['g', 'j', 'g', 'c', 'c', 'j', 'g', 'w', 'j', 'c'],\n                ['w', 'w', 'w', 'g', 'c', 'w', 'j', 'w', 'j', 'b'],\n                ['c', 'j', 'c', 'j', 'g', 'g', 'g', 'g', 'w', 'c'],\n                ['c', 'w', 'w', 'j', 'b', 'j', 'w', 'c', 'c', 'c'],\n                ['w', 'g', 'c', 'g', 'g', 'c', 'g', 'g', 'g', 'w'],\n                ['j', 'j', 'b', 'c', 'b', 'j', 'w', 'b', 'b', 'j'],\n                ['j', 'c', 'j', 'g', 'j', 'c', 'b', 'g', 'g', 'w'],\n                ['j', 'b', 'j', 'c', 'g', 'j', 'g', 'w', 'g', 'j']\n            ],\n            [1, 3],\n            5\n        )\n        this.levels.set('1', level1)\n        this.levels.set('2', level2)\n        this.levels.set('3', level3)\n        this.levels.set('4', level4)\n        this.levels.set('5', level5)\n    }\n\n    public setCurLevel(level: string) { this.curLevel = level } \n    public getCurLevel() { return this.curLevel } \n    public getLevels() { return this.levels }\n\n    public getLevel(requestedLevel: string) {\n        \n        if (requestedLevel !== undefined || requestedLevel !== null) {\n            return this.levels.get(requestedLevel)\n        }\n        return \n    }\n}","import { light } from \"@material-ui/core/styles/createPalette\"\nimport { CommandManager } from \"../../ds/CommandManager\"\nimport { InertiaMoveCommand } from \"../../ds/InertiaMoveCommand\"\nimport { NumberArraySet } from \"../../ds/NumberArraySet\"\nimport { LightUpCell } from \"./LightUpCell\"\nimport { LightUpLevel } from \"./LightUpLevel\"\nimport { LightUpLevelManager } from \"./LightUpLevelManager\"\n\nexport enum Toggle {\n    ON,\n    OFF,\n    NOTAPPLICABLE\n}\n\nexport class LightUp {\n\n    private board: LightUpCell[][]\n    private R: number\n    private C: number\n\n    private commandManager: CommandManager\n\n    private dirs: Map<string, number[]>\n    private numberOfBoxes: number\n    private levelManager: LightUpLevelManager\n\n    private lightbulbs: NumberArraySet\n    private rowsLimit: number[]\n    private colsLimit: number[]\n    private lightWalls: number[][]\n\n    constructor(row: number, col: number) {\n\n        this.numberOfBoxes = -1\n        this.commandManager = new CommandManager()\n        this.levelManager = new LightUpLevelManager()\n\n        this.dirs = new Map()\n        this.dirs.set(\"w\", [-1, 0])\n        this.dirs.set(\"s\", [1, 0])\n        this.dirs.set(\"a\", [0, -1])\n        this.dirs.set(\"d\", [0, 1])\n\n        let startLevel = this.levelManager.getLevel('1')!\n        let layer = startLevel.getBaseLayer()\n\n        // init board\n        this.lightWalls = []\n        this.board = []\n        this.R = row\n        this.C = col\n        for (let i = 0; i < row; i++) {\n            this.board[i] = []\n            for (let j = 0; j < col; j++) {\n                let isEmpty = layer[i][j] === 'e'\n                let isBlock = layer[i][j] !== 'e'\n                let lightsNum = -1\n                if (layer[i][j] !== 'e') lightsNum = +layer[i][j]\n                let node = new LightUpCell(i, j, layer[i][j], false, isBlock, false, isEmpty, lightsNum, false)\n                if (layer[i][j] !== 'b' && layer[i][j] !== 'e') {\n                    this.lightWalls.push([i, j])\n                }\n                this.board[i].push(node)\n            }\n        }\n\n\n        this.lightbulbs = new NumberArraySet()\n        this.rowsLimit = []\n        this.colsLimit = []\n        for (let i = 0; i < this.R; i++) { this.rowsLimit.push(0) }\n        for (let i = 0; i < this.C; i++) { this.colsLimit.push(0) }\n\n        // let command = new InertiaMoveCommand(this, this.getBoard(), this.player)\n        // this.commandManager.execute(command)\n    }\n\n    public move(x: number, y: number): [number[][], Toggle, number[][]] {\n        // the cell is blocking or crossed-out\n        if (this.board[x][y].getIsBlock() || this.board[x][y].getIsCross())\n            return [[], Toggle.NOTAPPLICABLE, []]\n\n        var toggle = null\n        let cell = this.board[x][y]\n        if (cell.getIsLight())\n            toggle = Toggle.OFF\n        else\n            toggle = Toggle.ON\n\n        var toggleCells: number[][] = []\n        if (toggle === Toggle.ON) {\n            this.lightbulbs.add([x, y])\n            this.rowsLimit[x] += 1\n            this.colsLimit[y] += 1\n            this.board[x][y].setIsLight(!this.board[x][y].getIsLight())\n            toggleCells = this.findAllEnlightenCells(x, y)\n            // let allCells = this.getLightenCells()\n            return [toggleCells, toggle!!, []]\n        } else {\n            this.lightbulbs.remove([x, y])\n            this.rowsLimit[x] -= 1\n            this.colsLimit[y] -= 1\n            toggleCells = this.findAllEnlightenCells(x, y)\n            this.board[x][y].setIsLight(!this.board[x][y].getIsLight())\n            let allCells = this.getLightenCells()\n            return [toggleCells, toggle!!, allCells]\n        }\n    }\n\n    private countEnlightenCells() {\n        let set = new NumberArraySet()\n        for (const [x, y] of this.lightbulbs) {\n            for (let i = x; i >= 0; i--) {\n                let cell = this.board[i][y]\n                if (cell.getIsCross() || cell.getIsBlock())\n                    break\n                else\n                    set.add([i, y])\n            }\n\n            for (let i = x; i < this.R; i++) {\n                let cell = this.board[i][y]\n                if (cell.getIsCross() || cell.getIsBlock())\n                    break\n                else\n                    set.add([i, y])\n            }\n\n            for (let i = y; i < this.C; i++) {\n                let cell = this.board[x][i]\n                if (cell.getIsCross() || cell.getIsBlock())\n                    break\n                else\n                    set.add([x, i])\n            }\n\n\n            for (let i = y; i >= 0; i--) {\n                let cell = this.board[x][i]\n                if (cell.getIsCross() || cell.getIsBlock())\n                    break\n                else\n                    set.add([x, i])\n            }\n        }\n        return set\n    }\n\n\n    private lightConflict() {\n        for (const [x, y] of this.lightbulbs) {\n            for (let i = x - 1; i >= 0; i--) {\n                let cell = this.board[i][y]\n                if (cell.getIsCross() || cell.getIsBlock())\n                    break\n                if (cell.getIsLight()) {\n                    return true\n                }\n            }\n\n            for (let i = x + 1; i < this.R; i++) {\n                let cell = this.board[i][y]\n                if (cell.getIsCross() || cell.getIsBlock())\n                    break\n                if (cell.getIsLight()) {\n                    return true\n                }\n\n            }\n\n            for (let i = y + 1; i < this.C; i++) {\n                let cell = this.board[x][i]\n                if (cell.getIsCross() || cell.getIsBlock())\n                    break\n                if (cell.getIsLight()) {\n                    return true\n                }\n            }\n\n\n            for (let i = y - 1; i >= 0; i--) {\n                let cell = this.board[x][i]\n                if (cell.getIsCross() || cell.getIsBlock())\n                    break\n                if (cell.getIsLight()) {\n                    return true\n                }\n            }\n        }\n        return false\n    }\n\n    public hasWon(): boolean {\n        // check if all cells are lit\n        let lighten = this.countEnlightenCells()\n        if (lighten.length !== this.levelManager.getLevelRequirement()) {\n            return false\n        }\n\n        // light checks\n        for (const [i, j] of this.lightWalls) {\n            let cnt = 0\n            for (const [ni, nj] of [[i + 1, j], [i - 1, j], [i, j + 1], [i, j - 1]]) {\n                if (this.isWithinBound(ni, nj) && this.board[ni][nj].getIsLight()) {\n                    cnt += 1\n                }\n            }\n            let limit = this.board[i][j].getLightsNum()\n            if (limit !== -1 && cnt != limit) {\n                return false\n            }\n        }\n\n        // no two lights on the same row or col\n        if (this.lightConflict()) return false\n\n        return true\n    }\n\n    public undo() {\n        this.commandManager.undo()\n    }\n\n    public redo() {\n        this.commandManager.redo()\n    }\n\n    public reset() {\n        let curLevel = this.levelManager.getCurLevel()\n        this.loadLevel(curLevel)\n    }\n\n    public loadLevel(requestedLevel: string) {\n\n        let level: LightUpLevel = this.levelManager.getLevel(requestedLevel)!\n        if (level === undefined || level === null) return\n\n        this.levelManager.setCurLevel(requestedLevel)\n        let layer = level.getBaseLayer()\n        let row = this.R\n        let col = this.C\n        for (let i = 0; i < row; i++) {\n            this.board[i] = []\n            for (let j = 0; j < col; j++) {\n                let isEmpty = layer[i][j] === 'e'\n                let isBlock = layer[i][j] !== 'e'\n                let lightsNum = -1\n                if (layer[i][j] !== 'e') lightsNum = +layer[i][j]\n                let node = new LightUpCell(i, j, layer[i][j], false, isBlock, false, isEmpty, lightsNum, false)\n                this.board[i].push(node)\n            }\n        }\n        this.commandManager = new CommandManager()\n        // let command = new InertiaMoveCommand(this, this.getBoard(), this.player)\n        // this.commandManager.execute(command)\n    }\n\n    private getLightenCells(): number[][] {\n        // let lightBulbs = []\n        // for (let i = 0; i < this.R; i ++) {\n        //     for (let j = 0; j < this.C; j ++) {\n        //         if (this.board[i][j].getIsLight()) {\n        //             lightBulbs.push([i, j])\n        //         }\n        //     }\n        // }\n        let res: number[][] = []\n        for (const [i, j] of this.lightbulbs) {\n            res = [...res, ...this.findAllEnlightenCells(i, j)]\n        }\n        return res\n    }\n\n    private findAllEnlightenCells(x: number, y: number) {\n        let enlightenCells = []\n        for (let i = x; i >= 0; i--) {\n            let cell = this.board[i][y]\n            if (cell.getIsCross() || cell.getIsBlock())\n                break\n            else\n                enlightenCells.push([i, y])\n        }\n\n        for (let i = x; i < this.R; i++) {\n            let cell = this.board[i][y]\n            if (cell.getIsCross() || cell.getIsBlock())\n                break\n            else\n                enlightenCells.push([i, y])\n        }\n\n        for (let i = y; i < this.C; i++) {\n            let cell = this.board[x][i]\n            if (cell.getIsCross() || cell.getIsBlock())\n                break\n            else\n                enlightenCells.push([x, i])\n        }\n\n        for (let i = y; i >= 0; i--) {\n            let cell = this.board[x][i]\n            if (cell.getIsCross() || cell.getIsBlock())\n                break\n            else\n                enlightenCells.push([x, i])\n        }\n        return enlightenCells\n    }\n\n    public isWithinBound(i: number, j: number) {\n        if (i >= 0 && i < this.R && j >= 0 && j < this.C)\n            return true\n        return false\n    }\n\n    public setBoard(newBoard: LightUpCell[][]) {\n        this.board = newBoard\n    }\n\n    public getBoard() {\n        return this.board\n    }\n\n    public getLevels() {\n        return this.levelManager.getLevels()\n    }\n\n    public getCommandManager(): CommandManager {\n        return this.commandManager\n    }\n\n    public getLevelManger() {\n\n    }\n\n    public toString = (): string => {\n        return this.getBoard().toString()\n    }\n\n}","import React from \"react\"\nimport { Inertia } from \"../../game/inertia/Inertia\"\nimport player from '../../images/circle_player.png'\nimport wall from '../../images/wall.png'\nimport gem from '../../images/coin.png'\nimport bomb from '../../images/bomb.png'\nimport brokenCircle from '../../images/broken_circle.png'\n\nexport const InertiaCellComponent: React.FC<InertiaCellProps> = (props) => {\n    const {\n        i,\n        j,\n        onClick,\n        type,\n        isPlayer,\n        isWall,\n        isBrokenCirlce,\n        isGem,\n        isBomb,\n        isGround,\n    } = props\n\n    const cellClassName = \n        isBrokenCirlce ? \n        'inertia_broken_circle' :\n        'inertia_ground'\n    // const cellClassName = isPlayer\n    //     ? 'inertia_player'\n    //     : isWall\n    //     ? 'inertia_wall'\n    //     : isBrokenCirlce\n    //     ? 'inertia_broken_circle'\n    //     : isGem\n    //     ? 'inertia_gem'\n    //     : isBomb\n    //     ? 'inertia_bomb'\n    //     : isGround\n    //     ? 'inertia_ground'\n    //     : ''\n        \n    const imgName = isPlayer\n        ? player\n        : isWall\n        ? wall\n        : isBrokenCirlce\n        ? brokenCircle\n        : isGem\n        ? gem\n        : isBomb\n        ? bomb\n        : isGround\n        ? 'inertia_ground'\n        : ''\n\n        \n    return (\n        <div\n            id={`cell-${i}-${j}`}\n            className={`node ${cellClassName}`}\n            onClick={() => onClick(i, j, type)}\n            // onMouseDown={() => onMouseDown(row, col)}\n            // onMouseEnter={() => onMouseEnter(row, col)}\n            // onMouseUp={() => onMouseUp()}></div> \n        >\n            <img \n                // className={'img'}\n                src={imgName} alt={''}\n            />\n        </div>\n    )\n}\n\ninterface InertiaCellProps {\n    i: number\n    j: number\n\n    imgSrc: string\n    type: string\n\n    isPlayer: boolean\n    isWall: boolean\n    isBrokenCirlce: boolean\n    isGem: boolean\n    isBomb: boolean\n    isGround: boolean\n\n    onClick: any\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAACTUlEQVR4Xu3bTXLCMAwFYHPB3oBte6auewGmy56onIJOqN0xbgKJnmTJ4bGCmSixP55/kpZD4gsSOEDVLE4EBENAQAKCAmA5E0hAUAAsZwIJCAqA5UwgAUEBsJwJJCAoAJZHSuBlQ1/CtNuzITdgx7fP1X4f7y/tsW798LjwFW4L2CPZCrR7f3peUB2uhfWA7AFoDucJaQ140Ryqj4byAqRpHy1P7opXMPOwNuun1YlD4PVAtAAMhWeNqA0YEs8SURMwNJ4VohbgEHgWiBqAQ+FpIxJw6+ayOR4FHDJ9mikkYML+OwMBHDp9Wikk4O+zRbGDtHAX6dNIIQFTSsgDBwISENzIOQDuav5D50HJECZgFXoCppTO5+/0dXoVbWeeHnDCm14EFK4lBBTClTICEhAUAMpL+jgHChG9AKfm7mIviM5/on1P/rKHB9RIHwFzGqR7wKcFrNOHLCAI4LDzoCYeAYFbuLLwS+6F603DUItJm748fCEDqHik7cwCHjoK5X+NqmIYPoVWeLD+KHvC6IChV2RLPK0EltEccihrb1va2250EWnPFwrRGk87gaGS2APPCtB9TuyFZwnogmi9YMw9dtSeA93mRA886wT+zYnTG8uffM3hadymzSXOehW+d03oR4dLSPUF83O9XsG4Xtp6CM+B3oVcA9We1AOutMED8GZolw9liK8BrMDc++EJ+G/BWTPn5GPCtDtMQzbghTqUgODXQUACggJgORNIQFAALGcCCQgKgOVMIAFBAbCcCSQgKACWM4EEBAXA8h+yvCJgPQfAIAAAAABJRU5ErkJgggAA\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAADy0lEQVR4Xu3cL28VQRAA8NcU0VS2BlFkdUU9SCQfAYUDxbcgQSFRNOkHQNYQ/lhMBZaSPEuaVLSKBjINk0z37e3Mzsze33mu73Zvd383c7NXjm6dnn77u4qPWmArANV2dx0D0OYXgEa/AGwC+PjFU+t5Z9n/6/uzjXVl74EBmL/+AWjMiwAMQKOAsXtEYAAaBYzd1RH46OZmtd7dZYeXtmNPNNIGKsCfh4erJ+fnboCAXPpILtRQviZAmDS3OC4CEa/rPNzxoeBwXBMgLFoCVELm+sNEJW36hvy0s3M35IN3H+ufRNIULi2QO+YRxX3jwXiugKUo4QC5W8AiIhAjIIcVgP916C8TSlU4BZsbIKYuBo3qHsilFUWbE2CKpy4inoBTKCI5uKYRSIG5LYj1eKsKXEKjYzZJYVpUpBGGfWhVHmoTLcVrlsL0CnERlkZQ+lgn2eZ4R2EvgN6THtP5AtB4NQJQAViD5lJEFHMcbRctnqmIjFZDMbEAVKDRLgE4J8CD62vjcvrrfrK/bx5M/STSNfJUAD3wmhSRKQB64QWgOYGV/yZSGnfsEegZfYuLQG+8RQG2wFsMYCu8AKwsIr+vrjZ6PDz5vPGd6RXfsRURz+gLwMqIo81zeHB81hHYOvpmDeiJB1C9RCC8sTCmz6/12m06TQHHBodqXoBdeG4pPGfAEl4AChI8AAVIXU04vNlGoMe9T4LnApi+ivHl6MhwzW1du+CeX17eO/GHvT12oOaA6Tsv+NIlzKyECP89Aj8cNm2brpj25eAkYJKnjpy6+kkkfXMKKzEsOgeDGHgs/TmdHHdckqYQeS3xTClMAek2pmvhOdgSdu4iSNDohagFlKYtHcMlAtN9YApTC0Xb16Lh4vC+J41ADZ5LBHalK/1eAyhdeFc16CP63AFz6duFB4OnxzDaaNXUQtZEoDb6XABL1TGHlCsW34+PVz8uLrLBZMGUIFrwzIDw+i33HFzaiqCYNMo0+zkYI+0H38GYVjwzILePK6UpvdlLAdMKixDsrjhpgKBvt7dru260N1XhGsDSZlcDiJFV2xej7vXt7WoQQG7DnLvHlRZZWy21+zyaroAHn14BD968vGdTqq7QkFbU2ihJ93KlPCudO4fmBYdzEqewFDBNVUuEWW5QaeHwiLbcfNwAW9zjtIAe1VU6thoQB9A+akknWNuuT7yqbUyawmODg8X0jVcF+OfVs9pg6LX9EHizARwKLwAdckRcRMaawkNG3+QjcGi8AFx6Ck8qAh0u1mJOEX/J3HipAzAAjQLG7hGBRsB/r1H1PhQJem0AAAAASUVORK5CYIIA\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAABPklEQVR4Xu3cQQ7BUABFUV2YlXR9XYmFMRZforn536DH2FOO2xgo23E8nreFt32/bzMPt/r1bKsPCDDmAxDgm4BTOAYxBJx9msXn/Lf56PMC4Im3A+AJrNFdAQKMAnGuQIBRIM4VCDAKxLkCAUaBOFcgwCgQ5woEGAXiXIEAo0CcKxBgFIhzBQKMAnGuwBmA8TEvP596ncoVdAHGdxkgwCgQ5woEGAXiXIEAo0CcKxBgFIhzBQKMAnGuQIBRIM4VCDAKxLkCAUaBOFcgwCgQ5woEGAXiXIEAo0CcK7ACjq738HvhsaprY2JtAAFGgThXIMAoEOcKBBgF4lyBAKNAnCsQYBSIcwUCjAJxrkCAUSDOFQgwCsS5AgFGgThXIMAoEOc/FxiP83W+6tu+lf/OvvR/pAHGNAEC/BBwCscoXu5FfOg2yDDsAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAC1ElEQVRoQ+2aKVIEMRSGexCgRmNYDCdAUYVAcgFuwXm4BRdAIrDcgQKDHgUCqEyRqXT67XnJbEEOL+n39f+WLD0b9uxvtme8QwvgX+VLrepTrcm1kNg7cffPc0IvyKrwHsC1QfMXUORzyWAx6MvDkSiNr++/RHb/RibfTYOGYSBh3x7nI8c/Pr9FICfHhyO787sFN07tv3oABZuDRm+twHE8A65iUBljsAGUg8rVy6U7mF+Sav4sXgcCXMwhNqRgg6ctgMNzSqGlwJOcjeHLgUbZShWO8wSlCXCWhzWAlE1zNQXmoLgKhP0/DfcIbIXmgFFloYLUGtgCTQFPYLl+2gIYioLT22foZ5CtCTBXgfP81FZwD2AwlLkChSlcG5hoWRNBMYVHwGkoW8K2FJgqduncgNIiYDJ3pcBYZaWct1R8Bjg8bgQNKTwCzldRmwyMhHYHTqNsom6+bNx0hZHevFI5D+kOvMsKizYIWxrSq2qdhjQYztuoMJXHHTiW7NItILXwCAsMKDVKFx7M1nEpble4hcLY8rIrLDgiUZyG9JDubank3God28Nepcc1gM7hYAudPe/S0jIw9t3SNq6lgeuYvh8mTz08V0A1D/GqnGlBDkOFrEZb4o57XYADoOWKZR3AkhsI9UG8VOHUjruxiLZcy+MUth7ET9pT2pMtq68awOmqCjnhmBzCgz8kypBXpZpCVhsY+Sqg/Paw9BREsNsjTRRbQVRM84W4l2o5IZen0d766QMHjObzJgBrQjm+KAkwCM21KmnltSosaUFQfkiBQWhrj6YSlQtpBJQrwKtHaoBRaO5TQ66/Rm9yWGHrEcOqDKl2Ff+HVfGziytTgWYKkzYtl/ZaheND2I9L06JmBSbC1wRbAoyGNyTl+9ONSGEBYDqPSSzToMx78XfTImreqMjnosGNwV18dZkEEMVLdXf/3Cd0gK/qU9XJ+XRsb7F3wH8MU0hbMyfr4gAAAABJRU5ErkJgggAA\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAACaklEQVRoQ+2aO1LDMBBAlZKOggIIBdyAmeQaoeE00BCacBJKUsAVKJMKeigI0DGcwMxqsh6hWNZv9bFlNXYcx9HT213JiUessDYqjJcNwH033nnDq8mkmq7XnEPcV4nrBfDR5TcbX29GvQcGQDAJwNC+Hg75Fo03We6s4c1izGGPrz4413o6ZXv3B2x/+cpfg/FeAKNVNItWJ6tVzfd5d6K03VnDVVVxw2AWGgDDPmwBOHfDvPNCU4oQ8xbCGSERXA5jOZ9TGxZBsS94rK1v1WYx5vkrAmPxyjmHAa4JrMn4zjEoXJjDJrAwEKkMN5lVrRVajWO1zn0eVpm1Xtl2ZaVFBmw7QilC2qQo2XIYnx8LWC44ydb2IYFryNnNm5GBp9szo7nY6GKKk0IAc1BTSFXnBXjSPlJejARUHgBqcCrgyteoLky34N799b4AYyw4LA4GBbQvcDRYKmgf4OiwFNCuwMlgfaFdgJPD+kAPwJrpIRu7rpZtDRcF3Ar7OD+tg+Ni/q5bR5C+bzM/2xgegEGTaFbWFst0CMNKuzkAP7/8sp/ludFvdKYhPQDL4ZuyaEU1jOCpgAEWWrSQJp1fHC42AGsGzbtoOUgh/UhRhhG2mBwOCQyDmN2Ng204G61MhITLCtjF7gBsUD6zsOxq19ZwNnkcEzg5tA+si+EigZNB+9p1NYy1LWoBo4D1BY5mmgqWAjgotAhqs15um15N75Z0UzRpeMugVLBUhuuchh2fP8ZbQMn6SmVYjADlow9NQKrQ2f5kQwaK3xMC+J9x0boOWIAkB40BvGNdVwhiPPsZ0rABX/xTigP+A0O4bUxcIoN5AAAAAElFTkSuQmCC\"","import { useState, useEffect } from 'react'\nimport { Inertia } from '../../game/inertia/Inertia'\nimport { InertiaCellComponent } from './InertiaCellComponent'\nimport player from '../../images/player.png'\n\n\nexport const InertiaComponent: React.FC<InertiaProps> = props => {\n    const game: Inertia = props.game\n    const [board, setBoard] = useState(game.getBoard())\n    const [refresh, setRefresh] = useState(false)\n    const move = (i: number, j: number, game: Inertia) => {\n        console.log(`cell clicks (${i}, ${j})`)\n        game.movePlayer(i, j)\n\n        setRefresh(pre => !pre)\n        \n    }\n\n    const slidePlayer = useEffect(() => {\n        const timer = setTimeout(() => {\n            // this will run after 1 s\n        }, 1000)\n        \n        // when component un-mount remove the timer\n        return () => clearTimeout(timer)\n    }, [])\n\n    return (\n        <div className=\"pipe_board center\">\n            <div className=\"grid_container\">\n                {\n                    game.getBoard().map((row, i)=>(\n                        <div className=\"pipe_grid_row\">\n                            {row.map((item, j)=>(\n                                <InertiaCellComponent\n                                    i={item.getI()}\n                                    j={item.getJ()}\n                                    onClick={()=>move(i, j, game)}\n                                    imgSrc={item.getType()}\n                                    type={item.getType()}\n                                    isPlayer={item.getIsPlayer()}\n                                    isWall={item.getIsWall()}\n                                    isBrokenCirlce={item.getIsBrokenCircle()}\n                                    isGem={item.getIsGem()}\n                                    isBomb={item.getIsBomb()}\n                                    isGround={item.getIsGround()}\n                                ></InertiaCellComponent>\n                            ))}\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    )\n}\n\ninterface InertiaProps {\n    game: Inertia\n}\n\ninterface InertiaState {\n\n}","import { render } from '@testing-library/react'\nimport React, { useState, useEffect } from 'react'\n\ninterface TimerProps {\n    resetTimer: boolean\n}\n\nexport const Timer: React.FC<TimerProps> = props => {\n    const [seconds, setSeconds] = useState(0)\n\n    useEffect(() => {\n        setSeconds(seconds => seconds = 0)\n    }, [props.resetTimer])\n    \n    useEffect(() => {\n        let interval = setInterval(() => {\n            setSeconds(seconds => seconds + 1)\n        }, 1000)\n        return () => {\n            clearInterval(interval)\n        }\n    }, [seconds])\n\n    const formatTime = (seconds: number) => {\n        if (seconds === 0) return '00:00'\n        let min = Math.floor(seconds / 60)\n        let sec = seconds % 60\n        return `${min}:${sec}`\n    }\n\n    return (\n        <div>\n            <text>\n                Time: {formatTime(seconds)}\n            </text>\n        </div>\n    )\n}\n","import { useState } from 'react'\nimport { Inertia } from '../../game/inertia/Inertia'\nimport { InertiaComponent } from './InertiaComponent'\nimport { Button, Typography, FormControl, InputLabel, Select, MenuItem } from '@material-ui/core'\nimport { InertiaLevel } from '../../game/inertia/InertiaLevel'\nimport { Timer } from '../Timer'\n\n\nconst inertia = new Inertia(10, 10)\nconst levels: Map<string, InertiaLevel> = inertia.getLevels()\nexport const InertiaApp = () => {\n    console.log([...levels.keys()])\n    const [refresh, setRefresh] = useState(false)\n    const [resetTimer, setResetTimer] = useState(false)\n\n    const handleReset = () => {\n        inertia.reset()\n        setRefresh(prev => !prev)\n        setResetTimer(prev => !prev)\n    }\n\n    const handleRedo = () => {\n        inertia.redo()\n        setRefresh(prev => !prev)\n    }\n\n    const handleUndo = () => {\n        inertia.undo()\n        console.log('after undo')\n        console.log(inertia.getCommandManager().undoStk)\n        console.log(`player position ${inertia.getPlayer().getX()} ${inertia.getPlayer().getY()}`)\n        setRefresh(prev => !prev)\n    }\n\n    const handleChange = (event: React.ChangeEvent<{ value: string }>) => {\n        let requestedLevel: string = event.target.value\n        inertia.loadLevel(requestedLevel)\n        setRefresh(prev => !prev)\n        setResetTimer(prev => !prev)\n    }\n\n    return (\n        <div className=\"inertia__app\">\n            <h1> INERTIA </h1>\n            <Select labelId=\"label\" id=\"select\" onChange={(e: any) => handleChange(e)}>\n                {\n                    [...levels.keys()].map(i => (\n                        <MenuItem value={i}> {i} </MenuItem>\n                    ))\n                }\n                {/* <MenuItem value=\"1\"> 1 </MenuItem>\n                <MenuItem value=\"2\"> 2 </MenuItem>\n                <MenuItem value=\"3\"> 3 </MenuItem> */}\n            </Select>\n            <div>\n                <Button onClick={() => handleReset()}> Reset </Button>\n                <Button onClick={() => handleUndo()}> Undo </Button>\n                <Button onClick={() => handleRedo()}> Redo </Button>\n                <Timer resetTimer={resetTimer}></Timer>\n            </div>\n\n            <div>\n                <InertiaComponent game={inertia}></InertiaComponent>\n            </div>\n            <div> instruction </div>\n                <p> Trying to collect coins as many as possible. Click undo if you step on a bomb. </p>\n            {/* <div> about </div> */}\n        </div>\n    )\n}\n\n","import React, { Component } from 'react'\nimport wall from '../images/wall.png'\nimport player from '../images/player.png'\nimport endpoint from '../images/endpoint.png'\nimport ground from '../images/ground.png'\nimport box from '../images/box.png'\n\ninterface SokobanCellProps {\n    i: number\n    j: number\n\n    imgSrc: string\n    type: string\n\n    isPlayer: boolean\n    isBox: boolean\n\n    onClick: any\n}\n\n\nexport class SokobanCellComponent extends Component<SokobanCellProps> {\n    render() {\n        const {\n            i,\n            j,\n            imgSrc,\n            onClick,\n            type,\n            isPlayer,\n            isBox\n        } = this.props\n\n        // const cellClassName = isFinish\n        //     ? 'cell_finish'\n        //     : isStart \n        //     ? 'cell_start'\n        //     : isPartPath\n        //     ? 'cell_path'\n        //     : 'pipe_grid_cell'\n        const cellClassName = type === 'g'\n            ? 'ground'\n            : type === 'w'\n            ? 'wall'\n            : type === 'e'\n            ? 'endpoint'\n            : 'ground'\n\n        const imgName = isPlayer === true\n            ? player\n            : isBox === true\n            ? box\n            : ''\n\n        const style = \"style='height: 100%; width: 100%; object-fit: contain\"\n        // const i0 = require('../images/i0.png')\n        return (\n            <div\n                id={`cell-${i}-${j}`}\n                className={`node ${cellClassName}`}\n                onClick={() => onClick(i, j, type)}\n                // onMouseDown={() => onMouseDown(row, col)}\n                // onMouseEnter={() => onMouseEnter(row, col)}\n                // onMouseUp={() => onMouseUp()}></div> \n            >\n                <img \n                    // className={'img'}\n                    src={imgName} alt={''}\n                />\n            </div>\n        )\n    }\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjJCQzQyNTY5RTI1NTExRTZCNUJFOEM2QkJDQzA1OUQ1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjJCQzcyN0ZCRTI1NTExRTZCNUJFOEM2QkJDQzA1OUQ1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MkJDNDI1NjdFMjU1MTFFNkI1QkU4QzZCQkNDMDU5RDUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MkJDNDI1NjhFMjU1MTFFNkI1QkU4QzZCQkNDMDU5RDUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6SouJPAAAJbklEQVR42uxb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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjJCNzFCOTYwRTI1NTExRTZCNUJFOEM2QkJDQzA1OUQ1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjJCNzFCOTYxRTI1NTExRTZCNUJFOEM2QkJDQzA1OUQ1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MkI2RDc0OTBFMjU1MTFFNkI1QkU4QzZCQkNDMDU5RDUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MkI3MUI5NUZFMjU1MTFFNkI1QkU4QzZCQkNDMDU5RDUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5zSkZWAAADbUlEQVR42tyb3W4SQRTHz5yCUEuLF5q0F0aSvoBvYCPaa99AY+o9PoG+gXhprD6D11IMvkEfob1pUxOTfoCAYEcOMGWz3WXPLjsfy/+m7Een8/vlMLDTGQGefGo0yitSvAIBO6PDe5OzYgcyHdmavjgHCS1YEd/2qtVjdVWoF18azXcSoDYDX96MOOtvnlff3giYwr/339i+uIB+r5dp2EKxCKVyOcCCrO3tPvuI+83moyB4Cv0iNbB08JPip2oHhH/B8FmXMB9+XPuV/YODlwhCVqIay5qESPjZYPACpeQNelmRwIYfDwNQQSHEYzrodbuZl8CFV6zEjupk5/Iy0xLiwBOrCnovZlVCUnhKzn+TuqG4ujq/NSHg18kJDPp9q/D5QgEebm8ngr9VAdxKaI+u/z47g7ul0rgDNuGpD9SXdgBcFHyogHkSFLyKLQkKXiVMwjz4uQKCJPjhbUnww4dJiIIPHAPCxoThYBAI75XwZ/RT95gQBu+VMAbL5yPhIyvAK+H0+DjyPt2VEAWvQn3lwLMFULqdDvxlPBnqksCFpz5SX7nBOJ2wJUEXfGwBNiTohE8kwKQE3fCJBZiQYAJ+IQE6JZiCX1iADgkm4VMRkKYE0/CpCUhDgg34VAUsIsEWPOtZIIkEyp2ICRP17KBe24DXIiCuBE50waf+FkjydrAJr1VAGhJ0w2sXsIgEE/BGBCSRYAremIDxjNJwqOXeTAjgfs7rnlSxIiAuvGkJ6CK8SQnoKrwpCWgTnkZ7mxOtWr4KJ32w4T47pP1/B3QB3uaUO9qGty0BXYC3KQFdgbclAV2CtyEBXYM3LQFdhDcpAV2FNyUBXYY3ISHnOrxXQpxvjKlWAK3De7C1ZX0mh1sJ1FfuOsYcB54WIaqFiJ2rKyvw3EpYW1+H+5ubN8dR+x2QA69CDdMfsAUfVQl+eM6KVuTCh0kwDR8mwQ/PlYBx4P0SbMH7JYTBcyTk4sJ7GxVCgAtZ29hg9TdoTMAk8JwVmCazyCr3XNbhvRIoUavc/YwIEo6CLmQJPkklzAQIecRp3HX4uBIoUspDlCAOlwU+tgQhWigQ6ssEH0cCsSNtJBYhO0ezCs+RQMxT9kk+N5ofxGTz9NLn1uZpla/ffzy5Fte16Zb5ZdtFfk5b6VFi/fXu05/q5H8BBgA93r8llM20NwAAAABJRU5ErkJggg==\"","import { Button, FormControl, InputLabel, MenuItem, Select, Snackbar } from '@material-ui/core';\nimport { request } from 'http';\nimport * as React from 'react';\nimport { SokobanMoveCommand } from '../ds/SokobanMoveCommand';\nimport { FloodTubes } from '../game/FloodTube';\nimport { Sokoban } from '../game/sokoban/Sokoban';\nimport { CellComponent } from './CellComponent';\nimport { HudComponent } from './HudComponent'\nimport { SokobanCellComponent } from './SokobanCellComponent';\nimport { Timer } from './Timer';\n\n\nexport interface SokobanProps {\n  game: Sokoban\n}\n\nexport interface SokobanState {\n  refresh: boolean\n  moves: number\n  won: boolean\n  resetTime: boolean\n\n}\n\nexport default class SokobanComponent extends React.Component<SokobanProps, SokobanState> {\n  constructor(props: SokobanProps) {\n    super(props);\n\n    this.state = {\n      // path: [],\n      // grid: this.props.game.getBoard(),\n      moves: 0,\n      refresh: false,\n      won: false,\n      resetTime: false\n    }\n  }\n\n  handleKeys(event: React.KeyboardEvent<HTMLDivElement>) {\n    let code = event.key\n    console.log(code)\n    let respond = this.props.game.canMove(code)\n    let movable: boolean = respond[0]\n    let withBox: boolean = respond[1]\n    let game = this.props.game\n    if (movable) {\n      if (withBox) {\n        console.log('move box')\n        this.props.game.moveBox(code)\n\n      } else {\n        console.log('move player')\n        this.props.game.movePlayer(code)\n      }\n\n      //\n      let manager = game.getCommandManager()\n      let command: SokobanMoveCommand = new SokobanMoveCommand(game, game.getBoard(), game.getPlayer())\n      manager.execute(command)\n      console.log(manager.undoStk)\n\n      let hasWon = this.props.game.hasWon()\n      this.setState({\n        moves: this.state.moves + 1,\n        refresh: !this.state.refresh,\n        won: hasWon\n      })\n    }\n\n    //   if(code === 'a') {\n    //     // this.move(\"LEFT\")\n    //     this.props.game.move(code)\n    //   } else if (code === 'w') {\n    //     // this.move(\"UP\")\n    //   } else if (code === 'd') {\n    //     // this.move(\"RIGHT\")\n    //   } else if (code === 's') {\n    //     // this.move(\"DOWN\")\n    //   }\n  }\n\n  handleRedoClick() {\n    let game = this.props.game\n    game.redo()\n    this.setState({\n      refresh: !this.state.refresh\n    })\n  }\n\n  handleUndoClick() {\n    console.log(\"undo is clicked\")\n    let game = this.props.game\n    game.undo()\n    console.log(game.getCommandManager().undoStk)\n    this.setState({\n      refresh: !this.state.refresh\n    })\n  }\n\n  handleReset() {\n    let manager = this.props.game.getLevelManger()\n    let curLevel = manager.getCurLevel()\n    this.props.game.loadLevel(curLevel)\n    this.setState({\n      moves: 0,\n      refresh: !this.state.refresh,\n      resetTime: !this.state.resetTime\n    })\n  }\n\n  handleChange(event: React.ChangeEvent<{ value: string }>) {\n    let requestedLevel: string = event.target.value\n    this.props.game.loadLevel(requestedLevel)\n    this.setState({\n      moves: 0,\n      refresh: !this.state.refresh,\n      resetTime: !this.state.resetTime\n    })\n  }\n  public render() {\n    let board = this.props.game.getBoard()\n    let levels = this.props.game.getLevels()\n    return (\n      <div>\n        {/* <HudComponent\n            flow={() => this.runBFS()}\n            loadLevel={(level: string[][])=>this.loadLevel(level)}\n            game={this.props.game}\n            levels={this.props.game.getLevels()}\n\n          ></HudComponent> */}\n        <h1>Sokoban</h1>\n        <Timer resetTimer={this.state.resetTime}></Timer>\n        <div className='hud'>\n          <InputLabel id=\"label\">Levels</InputLabel>\n          <Select labelId=\"label\" id=\"select\" onChange={(e: any) => this.handleChange(e)}>\n            {\n              [...levels.keys()].map(i => (\n                <MenuItem value={i}> {i} </MenuItem>\n              ))\n            }\n          </Select>\n          <Button variant=\"outlined\" color='primary' onClick={() => { this.handleReset() }}> reset </Button>\n          <Button variant=\"outlined\" color='primary' onClick={() => { this.handleUndoClick() }}> undo </Button>\n          <Button variant=\"outlined\" color='primary' onClick={() => { this.handleRedoClick() }}> redo </Button>\n          <h1>Moves: {this.state.moves}</h1>\n        </div>\n        <div className=\"pipe_board center\" tabIndex={0} onKeyDown={(e: React.KeyboardEvent<HTMLDivElement>) => this.handleKeys(e)}>\n          <div className='grid_container'>\n            {\n              board.map((lst, i) => (\n                <div className='pipe_grid_row'>\n                  {lst.map((item, j) => (\n                    <SokobanCellComponent\n                      i={i}\n                      j={j}\n                      type={item.type}\n                      imgSrc={item.type}\n                      onClick={(i: number, j: number, type: string) => { }}\n                      isPlayer={item.getIsPlayer()}\n                      isBox={item.getIsBox()}\n                    ></SokobanCellComponent>\n                    // <div className={\"pipe_grid_cell\"} onClick={()=>this.cellClick(i, j, item.type)}>\n                    // </div>\n                  ))}\n                </div>\n              ))\n            }\n          </div>\n        </div>\n        <Snackbar\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\n          autoHideDuration={1000}\n          message=\"The level is cleared\"\n          open={this.state.won}\n          onClose={() => { }}\n        />\n      </div>\n    );\n  }\n}","import React, { Component } from 'react'\nimport { isParenthesizedExpression } from 'typescript'\nimport i0 from '../images/i0.png'\nimport i1 from '../images/i1.png'\nimport start from '../images/start.png'\nimport finish from '../images/finish.png'\nimport d0 from '../images/d0.png'\nimport d1 from '../images/d1.png'\nimport d2 from '../images/d2.png'\nimport d3 from '../images/d3.png'\nimport t0 from '../images/t0.png'\nimport t1 from '../images/t1.png'\nimport t2 from '../images/t2.png'\nimport t3 from '../images/t3.png'\nimport four_ways from '../images/4ways.png'\n\n\ninterface CellProps {\n    i: number\n    j: number\n\n    isStart: boolean\n    isFinish: boolean\n    isPartPath: boolean\n\n    imgSrc: string\n    type: string\n\n    onClick: any\n}\n\n\nexport class CellComponent extends Component<CellProps> {\n    render() {\n        const {\n            i,\n            j,\n            isStart,\n            isFinish,\n            isPartPath,\n            imgSrc,\n            onClick,\n            type,\n        } = this.props\n\n        const cellClassName = isFinish\n            ? 'cell_finish'\n            : isStart \n            ? 'cell_start'\n            : isPartPath\n            ? 'cell_path'\n            : 'pipe_grid_cell'\n\n        const imgName = type === 'i0'\n            ? i0\n            : type === 'i1'\n            ? i1\n            : type === 'finish'\n            ? finish\n            : type === 'start'\n            ? start\n            : type === 'd0'\n            ? d0\n            : type === 'd1'\n            ? d1\n            : type === 'd2'\n            ? d2\n            : type === 'd3'\n            ? d3\n            : type === 't0'\n            ? t0\n            : type === 't1'\n            ? t1\n            : type == 't2'\n            ? t2\n            : type === 't3'\n            ? t3\n            : type === '4ways'\n            ? four_ways\n            : ''\n\n        // const i0 = require('../images/i0.png')\n        return (\n            <div\n                id={`cell-${i}-${j}`}\n                className={`node ${cellClassName}`}\n                onClick={() => onClick(i, j, type)}\n                // onMouseDown={() => onMouseDown(row, col)}\n                // onMouseEnter={() => onMouseEnter(row, col)}\n                // onMouseUp={() => onMouseUp()}></div> \n            >\n                <img \n                    src={imgName} alt={''}\n                />\n            </div>\n        )\n    }\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAYAAAA4TnrqAAABC0lEQVR4Xu3SwQmAMAAEQW3B0izU0tKCIliAC0EQxveShPHW5eNv37Zz1pXHGOuss96c8+ll94NgvfktTwMLVhAIqWXBCgIhtSxYQSCklgUrCITUsmAFgZBaFqwgEFLLghUEQmpZsIJASC0LVhAIqWXBCgIhtSxYQSCklgUrCITUsmAFgZBaFqwgEFLLghUEQmpZsIJASC0LVhAIqWXBCgIhtSxYQSCklgUrCITUsmAFgZBaFqwgEFLLghUEQmpZsIJASC0LVhAIqWXBCgIhtSxYQSCklgUrCITUsmAFgZBaFqwgEFLLghUEQmpZsIJASC0LVhAIqWXBCgIhtSxYQSCklgUrCIT0z8u6AJFgLFtVL+B3AAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAABB0lEQVR4Xu3ZMQEAIQwEwcQC0vDv5V/ElCz9UgzXsdMhgaW6eALEEQQYIApg3gIDRAHMW2CAKIB5CwwQBTBvgQGiAOYtMEAUwLwFBogCmLfAAFEA8xYYIApg3gIDRAHMW2CAKIB5CwwQBTBvgQGiAOYtUAHvOR/e8XS+Adr7B2h+E2CAKIB5CwwQBTBvgQGiAOYtMEAUwLwFBogCmLfAAFEA8xYYIApg3gIDRAHMW6ACYv983q8cTiDAAFEA8xYYIApg3gIDRAHMW2CAKIB5CwwQBTBvgQGiAOYtMEAUwLwFBogCmLfAAFEA8xYYIApg3gIDRAHMW2CAKIB5CwwQBTBvgQGiAOY/GDIddZwfwdcAAAAASUVORK5CYIIA\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAB+0lEQVR4Xu3aYW6DMAyGYTjH7n+0naMVk5AQBRrzxY7x3v3GJXnyOdB088SfJDBL1RRPAIohABBAUUAsJ4EAigJiOQkEUBQQy0kggKKAWB6WwN/X9BLHelj+M4/9MvB4wL1qNGg5wBU0CrIs4DaZnpgpAK0TvLOfWu/Rul8/EnA/OQtob8jhgD0nZIHs1eIhgGcT64k3KpXugCPwVszWRCoLWRpwgWxBTAs4Mn2tT1H1OtcEHgEqq61O1qMeQFE1FLBa+hZ7ALMm8D/sf64JBFCMNoCdASs+QEJbGEBjImlhI1jLaUjFFLq9B5JAMYFnJyFLCltOSK5unynJbglsPUrqsE5/HzEKtQxg9M+Z6/1cAaNTOAJxOGBr6yn7Zus97mwnQwHViSmoj/lVLuJ1RoVUFtI9gUf7oDLgszZTEJXxlAHcwloxAbyz+3eqKZnATjZNHwNgE9P5RQACKAqI5SQQQFFALHdPYMQ3EdFAKgdQ4nP+146rU2lx3GnKwxOofG1Ko7YZCIDiqgCYGbD6E3ixd00ggGK8AewMWO0JHN7CABoTuW9hAAH8EAh9CpNAEkgCjRn4enloCy+jqdbGAH7N2PUFAGYGPDpQpYWNK1b9Zdq1hTnSN6bt6PLqJzIkUAwJgNkBxfGlL3dPYHoBcYAAAigKiOUkUAR8AztP5FHcQVXrAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAACGklEQVR4Xu3b63GDMBAEYKgj/ZeWOpwhMR4PA0jK6vYe3vwNB+ZjdVIUvC76gQRWqFrFiwDBEAhQgKAAWK4EChAUAMuVQAGCAmC5ElgN8PuxPMB7+i3/WjlrXPcEzgK7Q7fE/AjAHdcC0hWQkb6zZM6EdAPswRu90Z5zzu6PLoB3NzqKdtX7GNfYrk0HZN3YDnt2vVkPiQ7IxpuxHGqdg5bAinjUBF4BzhxOrbRY/J6SwKp4tARaN3KLZPWe0y2B2YfuDuwCWAXPbQgLsLdBPI879kABCvAloB44GIbj4QIUICgAlrskcPaeHGgAlbsBVkF0BayASAHcoLSdBXWKv+KKiLQE3m2xZx7KdMBqSXQBbCFmSmRYwH3IR994cAPsSeH7vBUV0hWwNbGcTfzRIEMAZoYMBZgRMiTgKKTnsA4NmAEyBWBkyFSAvZDMIZ0SsGcNyUJMC9hKowAHts88X15Kn0DvJApwIOlnh5YBvJtYLPthKcArRAEODDP2hFIugewUmgB6v87GfKWYAujxPw7WQ6QBsrfnSwMyMD8G8DjBzlhypO+BrT+vBlYl//rqfhnAd6je7/L24F6l1OPdG5NJpIUwE7N1LesVgAvg8aatQWf01asHFQLQEtQSb/vcIQHPnvZoSq3h9s+YBrCn13kcI0BQXYACBAXAciVQgKAAWK4EChAUAMuVQAGCAmC5EihAUAAsVwJBwB9ttMlRPh89fQAAAABJRU5ErkJgggAA\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAABOElEQVR4Xu3YUQqCQBiF0dxCS2uhLc0tFNWLUEH2CWNxevbOyPGKfzMdBv1Ox+Nly63P8zxtud6naw3Z9HZzAD99RG+uAwjwLuAVjkUACPAh4CscmwAQ4DoBY8w6r6erAQI0B8YOAAS4EDDGxDoABLhOwBizzsscGL0AAnwt4DwwNgMgQAeqsQMAAX4jYJD+Rm2RAQjQeWDsAECADlS36IA5cDvFASv9zX/hAXb/9REBOEog7usVBhgFYlwDAUaBGNdAgFEgxjUQYBSIcQ0EGAViXAMBRoEY18BfBYz3vZv4sAbuRiDeCECAUSDGNRBgFIhxDQQYBWJcAwFGgRjXQIBRIMY1EGAUiHENBBgFYlwDAUaBGNdAgFEgxjUQYBSIcQ0EGAViXAMBRoEY10CAUSDGNRBgFIjxK+ySnRaA3wdtAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAABHElEQVR4Xu3Y0QmEMAAFQW3B0iz0SrOFEwI24Aq5w/F/IYwvCK6LJwmsqRYvAOMIAAKMAjG3QIBRIOYWCDAKxNwCAUaBmFsgwCgQcwsEGAViboEAo0DMLRBgFIi5BQKMAjG3QIBRIOYWCDAKxNwCAUaBmFsgwCgQcwv8V8B9277x7D+RT1sgwPj+AQIcAq5wHAJAgFEg5hYIMArE3AIBRoGYWyDAKBBzCwQYBWJugQCjQMwtEGAUiLkFvhnwcxzTBnC5TzvAE7/0AcbrAxDgfQFX+L7dKAECHAK+wnEIAAFGgZhbIMAoEHMLBBgFYm6BAKNAzC0QYBSIuQUCjAIxt0CAUSDmFggwCsTcAgFGgZhbIMAoEHMLBBgFYn4ChvmVdTjkQdkAAAAASUVORK5CYIIA\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAABMElEQVR4Xu3ZwQnCQABFwaQFS7NQS0sLCgYk4Cn7Aisynv0SxqescV08ksCa1sYLwBgBQIBRIM4VCDAKxLkCAUaBOFcgwCgQ5woEGAXiXIEAo0CcKxBgFIhzBQKMAnGuQIBRIM4VCDAKxLkCAUaBOFcgwCgQ5woEGAXiXIEV8H67PeNr/MT8sW1TYlgBtvcfYPNbAALcBXwHxhIAAowCca5AgFEgzhUIMArEuQIBRoE4VyDAKBDnCgQYBeJ8WoHxuofnV9/IBTj8Vky+nRWve3iuwGG6fQgQ4Ftgyl+BCoz1AQT4EfARjjEABOggHRsACHBEwC+REbXDBiBAP+ViAwABHgTckY45AAR4TsAx5pzX17MBAnSMiQ0ABOgceEUD7gdeouggHRkBAjwn8C8H6Rd6x8hRzGFqNgAAAABJRU5ErkJgggAA\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAABLElEQVR4Xu3bwQ2CQABFQbcFSrNQS6MFSTwRb+RtsiGMZx+S2Y8nHa/Fr/e2fWfcwmffx4zrXL3Gkg893yTAq0f2936AAKNAzC0QYBSIuQUCjAIxt0CAUSDmFggwCsTcAgFGgZhbIMAoEHMLBBgFYm6BAKNAzC0QYBSIuQUCjAIxt0CAUSDmFggwCsTcAp8OOGsB0THny36dBbCd3QAI8CfgEW5DABj9AAKsArH3HQgwCsTcAgFGgZhbIMAoEHMLBBgFYm6BAKNAzC0QYBSI+bIFxvt+fL78H+t3PwGA8QQBAowCMbdAgFEg5hYIMArE3AIBRoGYWyDAKBBzCwQYBWJugQCjQMwtEGAUiLkFAowCMbdAgFEg5hYIMArE3AIBRoGYWyDAKBBzC4yAB6OyyFEZbMxMAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAABJElEQVR4Xu3bsQ2DMABFQbwCozFoRmOFpI3o0LNkIY6aB+j8W8a2+Dr2/TvjEz7nOWY85+4zlrz0/yMB3j2yy/0AAUaBmFsgwCgQcwsEGAViboEAo0DMLRBgFIi5BQKMAjG3QIBRIOYWCDAKxNwCAUaBmFsgwCgQcwsEGAViboEAo0DMLRBgFIi5Bb4dcNYCouNj8wGwnR3A5rcBBBgFYm6BAKNAzC0QYBSIuQUCjAIxt0CAUSDmFggwCsTcAgFGgZhbIMAoEHMLrICxf32+/I/1p58AwHiCAAFGgZhbIMAoEHMLBBgFYm6BAKNAzC0QYBSIuQUCjAIxt0CAUSDmFggwCsTcAgFGgZhbIMAoEHMLBBgFYm6BAKNAzC0QYBSIuQVGwB9oI5V10ClTrwAAAABJRU5ErkJgggAA\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAABO0lEQVR4Xu3bQQrCMBAFUHsFj+ZBPVqvoKibQCt08gOB8FxnGnn+knGq223S63G/v0Zu/dz3beT1rl5ryqafNwfw6kf0Zx1AgF8Bt3AYBIAAfwJO4TAJAAHWBLQxNa/DaoAA9YFhBgACbAS0MWEcAAKsCWhjal76wNALIMBzAfPAMBkAARqohhkACLBHQCPdo9bUAARoHhhmACBAA9URGdAHjlOccKVlvgtPsFvrEAE4SyDc1y0MMBQIyyUQYCgQlksgwFAgLJdAgKFAWC6BAEOBsFwCAYYCYbkEAjSRDjMAEGCPgF8m9Kg1NQABrvVQyR9twkQDBFgTcIjUvA6rAQJ0CocZAAiwEdDGhHEACLAmoI2peekDQy+AAM8Flnkq5xQOIw4QYE1AG1PzcgqHXgABamNGZ8A8cIToG3FmFSWEGIs+AAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAABGklEQVR4Xu3ZwQ1AQABFwd0WlKZQpWmBhA48iYNxfyLj72nn8CSBmWrxABhHABBgFIi5BQKMAjG3QIBRIOYWCDAKxNwCAUaBmFsgwCgQcwsEGAViboEAo0DMLRBgFIi5BQKMAjG3QIBRIOYWCDAKxNwCAUaBmFtgBVyX5Yjv+HU+Abb/D7D5DYAAo0DMLRBgFIi5BQKMAjG3QIBRIOYWCDAKxNwCAUaBmFsgwCgQcwsEGAViboEVMPaP8zeuErZ9//xS7LMPAPh4e3cIEOAl4AjHIQAEGAViboEAo0DMLRBgFIi5BQKMAjG3QIBRIOYWCDAKxNwCAUaBmFsgwCgQcwsEGAViboEAo0DMLRBgFIi5BQKMAjG3wAh4AjCrlXXmpLvzAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAABSklEQVR4Xu3ZUQqCQBQF0NyCS2uhLc0tFDlBggbOuwMSnL59oxzv4GWabhf97vP8HHnrx7JMI9c7u9YlN30/HMCzr+jHdQABrgK2cBgEgACbgK9wmASAAPsE1Jg+r93VAAHqgWEGAALcCKgxYRwAAuwTUGP6vPTA0AsgwGMB54FhMgACdKAaZgAgwIqAIl1R28wABOg8MMxAAxy9lUY8VGWNy46zAFZe13dGAjM/Wzj0AwjwI+AjEkYBIMBQIByXQIChQDgugQBDgXBcAgGGAuG4BAIMBcJxCfxXwPC5y+OjD3IvS2BZIBwECLD9qRQ6lMclsEzXBgECtIXDDAAEuBHQA8M4AATYJ6DG9HntrgYIUI0JMwAQoB44IgNtDT0wtAQIsE9AD+zzUqRDL4AAjwX8qRQmAyBARTrMAECAFQFFuqK2mQEIcBV4ASiGQGDSPWW2AAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAABPklEQVR4Xu3aUWrCUBCG0boFl9aFdmluoVLzEogFJ98FEY7Pd5Jw8l8yGXP5etPv+3r9XXnqn9vtsvJ4rx7rLSf9uziAr96if9YBBPgQsIVjEAAC3AQ8hWMSAAKcCWhjZl6H1QAB6gNjBgAC3AloY2IcAAKcCWhjZl76wOgFEOBzAfPAmAyAAA1UYwYAAjwjoJE+o7arAQjQPDBmYANcvZVWXNQnHQNgvFsAAUaBWC6BAKNALJdAgFEglksgwCgQyyUQYBSI5RIIMArEcgkEGAViuQQCjAKx3JcJADcBX6jGJAAEOBNY/W+gBM78D6sBApwJ2MIzr8NqgAAfAt5EYhAAAvQqFzMAEOAZAW3MGbVdDUCA+sCYAYAAdwLGWTEOAAHOBLQxMy/zwOgFEOBzAfPAmAyAAM0DYwYAfjTgHdcIEprY+NNXAAAAAElFTkSuQmCC\"","import { Button } from '@material-ui/core';\nimport * as React from 'react';\nimport { FloodTubes } from '../game/FloodTube';\nimport { CellComponent } from './CellComponent';\nimport {HudComponent} from './HudComponent'\n\nexport interface FloodTubeProps {\n  game: FloodTubes\n  selectedLevel: string\n}\n\nexport interface FloodTubeState { \n  refresh: boolean\n\n}\n\nexport default class FloodTubeComponent extends React.Component<FloodTubeProps, FloodTubeState> {\n  constructor(props: FloodTubeProps) {\n    super(props);\n\n    this.state = {\n      // path: [],\n      // grid: this.props.game.getBoard(),\n      refresh: false\n    }\n  }\n\n  handleClick(i: number, j: number, type: string) {\n\n    this.props.game.rotate(i, j, type)\n    this.setState({refresh: !this.state.refresh})\n\n  }\n\n  animatePath(path: number[][]) {\n    console.log('animating path')\n    for (let i = 0; i < path.length; i++) {\n      setTimeout(() => {\n        const node = path[i];\n        document.getElementById(`cell-${node[0]}-${node[1]}`)!.className =\n          'pipe_grid_cell node-shortest-path';\n      }, 5 * i);\n    }\n  }\n\n  runBFS() {\n    let str: string = this.props.selectedLevel\n    const lst: string[] = str.split(' ')\n    const category: string = lst[0]\n    const index: number = +lst[1]\n    if (category === 'classic') {\n      let p = this.props.game.BFS()\n      this.animatePath(p)\n\n    } else if(category === 'wrapping') {\n      let p = this.props.game.wrappingBFS()\n      this.animatePath(p)\n    }\n  }\n\n\n\n\n  public render() {\n    let board = this.props.game.getBoard()\n    return (\n      <div>\n          {/* <HudComponent\n            flow={() => this.runBFS()}\n            loadLevel={(level: string[][])=>this.loadLevel(level)}\n            game={this.props.game}\n            levels={this.props.game.getLevels()}\n\n          ></HudComponent> */}\n          <Button onClick={()=>this.runBFS()}> FLOW </Button>\n          <div className=\"pipe_board center\">\n          <div className='grid_container'>\n            {\n              board.map((lst, i) => (\n                <div className='pipe_grid_row'>\n                  {lst.map((item, j) => (\n                    <CellComponent\n                      isFinish={false}\n                      isStart={false}\n                      isPartPath={item.isPartPath}\n                      i={i}\n                      j={j}\n                      type={item.type}\n                      imgSrc={item.imgSrc}\n                      onClick={(i: number, j: number, type: string) => this.handleClick(i, j, item.type)}\n                    ></CellComponent>\n                    // <div className={\"pipe_grid_cell\"} onClick={()=>this.cellClick(i, j, item.type)}>\n                    // </div>\n                  ))}\n                </div>\n              ))\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}","import React, { Component } from 'react'\nimport { Button, Typography, FormControl, InputLabel, Select, } from '@material-ui/core';\nimport { FloodTubes } from '../game/FloodTube';\nimport FloodTubeComponent from './FloodTubeComponent';\nimport { Cell } from '../game/Cell';\nimport { CommandManager } from '../ds/CommandManager';\n\n\ninterface HudProps {\n\n    game: FloodTubes\n\n}\n\ninterface HudState {\n    refresh: boolean\n    selectedLevel: string\n}\n\nexport class HudComponent extends React.Component<HudProps, HudState> {\n\n    constructor(props: HudProps) {\n        super(props);\n\n        this.state = {\n            refresh: false,\n            selectedLevel: 'none'\n        }\n    }\n\n\n    handleChange(event: React.ChangeEvent<{ value: string }>) {\n\n        const str: string = (event.target.value)\n        if (str === undefined || str === null || str === '' || str === 'none') return\n        const lst: string[] = str.split(' ')\n        const category: string = lst[0]\n        const index: number = +lst[1]\n\n        const levels: Map<string, string[][][]> = this.props.game.getLevels()\n        const newBoard: string[][] = levels.get(category)![index]\n        var board: Cell[][] = this.props.game.getBoard()\n        for (let i = 0; i < board.length; i ++) {\n            for (let j = 0; j < board[i].length; j ++) {\n                board[i][j].type = newBoard[i][j]\n                board[i][j].isPartPath = false\n            }\n        }\n\n        this.setState({\n            refresh: !this.state.refresh,\n            selectedLevel: str\n        })\n    }\n\n    handleReset() {\n        console.log('doing a reset')\n        let str = this.state.selectedLevel\n        if (str === undefined || str === null || str === '' || str === 'none') return\n        const lst: string[] = str.split(' ')\n        const category: string = lst[0]\n        const index: number = +lst[1]\n\n        const levels: Map<string, string[][][]> = this.props.game.getLevels()\n        const newBoard: string[][] = levels.get(category)![index]\n        var board: Cell[][] = this.props.game.getBoard()\n        for (let i = 0; i < board.length; i ++) {\n            for (let j = 0; j < board[i].length; j ++) {\n                board[i][j].type = newBoard[i][j]\n                board[i][j].isPartPath = false\n            }\n        }\n\n        this.setState({\n            refresh: !this.state.refresh,\n            selectedLevel: str\n        })\n    }\n\n    handleFlowClick() {\n\n    }\n\n    handleUndoClick() {\n        let commandManager: CommandManager = this.props.game.getCommandManager()\n        commandManager.undo()\n\n        this.setState({\n            refresh: !this.state.refresh\n        }) \n    }\n\n    handleRedoClick() {\n        console.log('redoing')\n        let commandManager: CommandManager = this.props.game.getCommandManager()\n        console.log(commandManager.redoStk)\n        commandManager.redo()\n\n        this.setState({\n            refresh: !this.state.refresh\n        }) \n    }\n\n    handleSolveClick() {\n        let game = this.props.game\n        // let category = this.state.selectedLevel.split(' ')[0]\n        // game.solveBoard(category)\n        // if (game.getSolutionBoard() !== undefined) {\n        //     game.setBoard(game.getSolutionBoard()!)\n        //     // console.log(game.getBoard())\n        // }\n        // this.setState({\n        //     refresh: !this.state.refresh\n        // }) \n        console.log('solve click')\n        game.minBFS()\n\n\n    }\n    \n    render() {\n        const {\n            game,\n        } = this.props\n        let levels: Map<string, string[][][]> = game.getLevels()\n        return (\n            <div>\n                <h1>Flood Tubes</h1>\n                <div className='hud'>\n                    <FormControl>\n                        <InputLabel htmlFor=\"grouped-native-select\">Levels</InputLabel>\n                        <Select native defaultValue=\"\" id=\"grouped-native-select\" onChange={(e: any)=>this.handleChange(e)}>\n                            <option aria-label=\"None\" value=\"\"/>\n                            {\n                                [...levels.keys()].map(k => (\n                                    <optgroup label={k}>\n                                        {[...Array(levels.get(k)?.length)].map((v, i) => (\n                                            \n                                            <option value={`${k} ${i}`}>{`${k} ${i}`}</option>\n                                        ))}\n                                    </optgroup>\n                                ))\n                            }\n                            {/* <optgroup label=\"classic\">\n                                <option value={1}>Level 1</option>\n                                <option value={2}>Level 2</option>\n                            </optgroup>\n                            <optgroup label=\"wrapping\">\n                                <option value={3}>Level 1</option>\n                                <option value={4}>Level 2</option>\n                            </optgroup> */}\n                        </Select>\n                    </FormControl>\n                    <Button variant=\"outlined\" color='primary' onClick={()=>{this.handleReset()}}> reset </Button>\n                    <Button variant=\"outlined\" color='primary' onClick={()=>{this.handleUndoClick()}}> undo </Button>\n                    <Button variant=\"outlined\" color='primary' onClick={()=>{this.handleRedoClick()}}> redo </Button>\n                    <Button variant=\"outlined\" color='primary' onClick={()=>{this.handleSolveClick()}}> solve </Button>\n                </div>\n                <div>\n                    <FloodTubeComponent \n                        game={game}\n                        selectedLevel={this.state.selectedLevel}\n                    ></FloodTubeComponent>\n\n                </div>\n            </div>\n\n        )\n    }\n}","export class NumberArraySet extends Array<number[]> {\n    add(arr: number[]) {\n        if (!this.has(arr)) this.push(arr);\n    }\n\n    has(arr: number[]) {\n        for (let i = 0; i < this.length; i++) {\n            if (this[i].every((v, j) => v === arr[j])) return true;\n        }\n        return false;\n    }\n\n    remove(arr: number[]) {\n        if (this.has(arr)) {\n            var removeIdx = 0\n            for (let i = 0; i < this.length; i++) {\n                if (this[i].every((v, i) => v === arr[i])) {\n                    removeIdx = i\n                }\n            }\n            this.splice(removeIdx, 1)\n        }\n    }\n}\n","export class LightUpCell {\n    private i: number\n    private j: number\n    public type: string\n\n    private isLight: boolean\n    private isBlock: boolean\n    private isCross: boolean\n    private isEmpty: boolean\n    private lightsNum: number\n    private isLightenUp: boolean\n\n    constructor(i: number, j: number, type: string, isLight: boolean, isBlock: boolean, isCross: boolean, isEmpty: boolean, lightsNum: number, isLightenUp: boolean) {\n        this.i = i\n        this.j = j\n        this.type = type \n        this.isLight = isLight\n        this.isBlock = isBlock\n        this.isCross = false\n        this.isEmpty = isEmpty\n        this.lightsNum = lightsNum\n        this.isLightenUp = isLightenUp\n    }\n\n    public deepCopy() {\n        return new LightUpCell(\n            this.i,\n            this.j,\n            this.type,\n            this.isLight,\n            this.isBlock,\n            this.isCross,\n            this.isEmpty,\n            this.lightsNum,\n            this.isLightenUp\n        )\n    }\n\n    public setIsLight(bool: boolean) { this.isLight = bool }\n    public setIsBlock(bool: boolean) { this.isBlock = bool }\n    public setIsCross(bool: boolean) { this.isCross = bool }\n    public setLightsNum(lightsNum: number) { this.lightsNum = lightsNum}\n    public setIsEmpty(bool: boolean) { this.isEmpty = bool }\n    public setI(i: number) { this.i = i }\n    public setJ(j: number) { this.j = j }\n    public setType(type: string) { this.type = type }\n    public setIsLightenUp(bool: boolean) { this.isLightenUp = bool}\n\n    public getI() { return this.i }\n    public getJ() { return this.j }\n    public getType() { return this.type }\n    public getIsLight() { return this.isLight }\n    public getIsBlock() { return this.isBlock }\n    public getIsCross() { return this.isCross }\n    public getLightsNum() { return this.lightsNum }\n    public getIsEmpty() { return this.isEmpty }\n    public getIsLightenUp() { return this.isLightenUp }\n\n}","export class LightUpLevel {\n\n    private levelName: string\n    private baseLayer: string[][]\n    private minLights: number\n\n    constructor(levelName: string, baseLayer: string[][], minLights: number) {\n        this.levelName = levelName\n        this.baseLayer = baseLayer\n        this.minLights = minLights\n    }\n\n    public setMinLights(minLights: number) { this.minLights = minLights }\n    public setBaseLayer(layer: string[][]) { this.baseLayer = layer }\n\n    public getBaseLayer() { return this.baseLayer }\n    public getLevelName() { return this.levelName }\n    public getMinLights() { return this.minLights }\n\n    public getLevelLightRequirement(): number {\n        let cnt = 0\n        for (let i = 0; i < this.baseLayer.length; i ++) {\n            for (let j = 0; j < this.baseLayer[i].length; j ++) {\n                if (this.baseLayer[i][j] === 'e') cnt += 1\n            }\n        }\n        return cnt\n    }\n}","import { LightUpLevel } from \"./LightUpLevel\"\n\nexport class LightUpLevelManager {\n\n    private curLevel: string\n    private levels: Map<string, LightUpLevel>\n\n    constructor() {\n        this.curLevel = '1'\n        this.levels = new Map()\n\n        const level1 = new LightUpLevel(\n            '1',\n            [\n                ['e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e'],\n                ['e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e'],\n                ['e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e'],\n                ['e', 'e', 'e', 'e', 'e', 'e', '2', '0', 'e', 'e'],\n                ['e', 'e', 'e', 'b', 'e', 'e', 'e', 'e', 'e', 'e'],\n                ['e', 'e', 'e', '1', 'e', 'e', 'e', 'e', 'e', 'e'],\n                ['e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e'],\n                ['e', 'e', 'e', 'e', 'e', 'e', '0', '0', 'e', 'e'],\n                ['e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e'],\n                ['e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e']\n            ],\n            5,\n        )\n\n        \n        const level2 = new LightUpLevel(\n            '2',\n            // [\n            //     ['b', 'b', 'b', 'b', 'b', 'b', 'b', 'b', 'b', 'b'],\n            //     ['b', 'b', 'b', 'b', 'b', 'b', 'b', 'b', 'b', 'b'],\n            //     ['b', 'b', 'e', 'e', '0', 'e', '1', 'e', 'e', 'b'],\n            //     ['b', 'b', 'e', '0', 'e', 'e', 'e', '0', 'e', 'b'],\n            //     ['b', 'b', 'e', 'b', 'e', 'e', 'e', 'e', 'e', 'b'],\n            //     ['b', 'b', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'b'],\n            //     ['b', 'b', 'e', '1', 'e', 'e', 'e', '2', 'e', 'b'],\n            //     ['b', 'b', 'e', 'e', '1', 'e', '2', 'e', 'e', 'b'],\n            //     ['b', 'b', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'b'],\n            //     ['b', 'b', 'b', 'b', 'b', 'b', 'b', 'b', 'b', 'b']\n            // ],\n            [\n                ['b', 'b', 'b', 'b', 'b', 'b', 'b', 'b', 'b', 'b'],\n                ['b', 'b', 'b', 'b', 'b', 'b', 'b', 'b', 'b', 'b'],\n                ['b', 'b', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'b'],\n                ['b', 'b', 'e', 'e', '0', 'e', '1', 'e', 'e', 'b'],\n                ['b', 'b', 'e', '0', 'e', 'e', 'e', '0', 'e', 'b'],\n                ['b', 'b', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'b'],\n                ['b', 'b', 'e', '1', 'e', 'e', 'e', '2', 'e', 'b'],\n                ['b', 'b', 'e', 'e', '1', 'e', '2', 'e', 'e', 'b'],\n                ['b', 'b', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'b'],\n                ['b', 'b', 'b', 'b', 'b', 'b', 'b', 'b', 'b', 'b']\n            ],\n            5\n        )\n\n        const level3 = new LightUpLevel(\n            '3',\n            [\n                ['j', 'g', 'c', 'g', 'g', 'w', 'j', 'j', 'g', 'g'],\n                ['c', 'g', 'j', 'g', 'j', 'g', 'c', 'g', 'c', 'w'],\n                ['g', 'j', 'g', 'g', 'j', 'g', 'g', 'w', 'g', 'c'],\n                ['c', 'j', 'g', 'g', 'c', 'w', 'j', 'c', 'g', 'g'],\n                ['c', 'g', 'c', 'w', 'b', 'g', 'g', 'g', 'w', 'c'],\n                ['c', 'w', 'c', 'g', 'b', 'c', 'w', 'c', 'c', 'j'],\n                ['g', 'g', 'c', 'c', 'g', 'c', 'g', 'g', 'g', 'j'],\n                ['j', 'j', 'w', 'c', 'g', 'c', 'w', 'g', 'b', 'j'],\n                ['g', 'j', 'j', 'g', 'j', 'c', 'j', 'g', 'g', 'j'],\n                ['j', 'j', 'j', 'g', 'j', 'g', 'j', 'w', 'g', 'g']\n            ],\n            5\n        )\n\n        const level4 = new LightUpLevel(\n            '4',\n            [\n                ['j', 'g', 'c', 'g', 'g', 'w', 'j', 'j', 'g', 'g'],\n                ['c', 'g', 'j', 'g', 'j', 'g', 'c', 'b', 'c', 'w'],\n                ['g', 'j', 'g', 'c', 'j', 'g', 'g', 'w', 'g', 'c'],\n                ['w', 'w', 'w', 'j', 'c', 'w', 'j', 'c', 'g', 'g'],\n                ['w', 'g', 'c', 'j', 'g', 'g', 'g', 'g', 'w', 'c'],\n                ['w', 'w', 'w', 'j', 'b', 'c', 'w', 'c', 'c', 'c'],\n                ['w', 'g', 'c', 'g', 'g', 'j', 'g', 'g', 'g', 'j'],\n                ['j', 'j', 'b', 'c', 'b', 'j', 'w', 'b', 'b', 'j'],\n                ['j', 'c', 'j', 'g', 'j', 'c', 'b', 'g', 'g', 'j'],\n                ['j', 'j', 'j', 'g', 'j', 'g', 'j', 'w', 'g', 'g']\n            ],\n            5\n        )\n\n        const level5 = new LightUpLevel(\n            '5',\n            [\n                ['j', 'g', 'c', 'b', 'g', 'w', 'j', 'j', 'g', 'b'],\n                ['c', 'g', 'j', 'g', 'j', 'j', 'c', 'b', 'c', 'w'],\n                ['g', 'j', 'g', 'c', 'c', 'j', 'g', 'w', 'j', 'c'],\n                ['w', 'w', 'w', 'g', 'c', 'w', 'j', 'w', 'j', 'b'],\n                ['c', 'j', 'c', 'j', 'g', 'g', 'g', 'g', 'w', 'c'],\n                ['c', 'w', 'w', 'j', 'b', 'j', 'w', 'c', 'c', 'c'],\n                ['w', 'g', 'c', 'g', 'g', 'c', 'g', 'g', 'g', 'w'],\n                ['j', 'j', 'b', 'c', 'b', 'j', 'w', 'b', 'b', 'j'],\n                ['j', 'c', 'j', 'g', 'j', 'c', 'b', 'g', 'g', 'w'],\n                ['j', 'b', 'j', 'c', 'g', 'j', 'g', 'w', 'g', 'j']\n            ],\n            5\n        )\n        this.levels.set('1', level1)\n        this.levels.set('2', level2)\n        this.levels.set('3', level3)\n        this.levels.set('4', level4)\n        this.levels.set('5', level5)\n    }\n\n    public setCurLevel(level: string) { this.curLevel = level } \n    public getCurLevel() { return this.curLevel } \n    public getLevels() { return this.levels }\n\n    public getLevel(requestedLevel: string) {\n        \n        if (requestedLevel !== undefined && requestedLevel !== null) {\n            return this.levels.get(requestedLevel)\n        }\n        return \n    }\n\n    public getLevelRequirement() {\n        if (this.curLevel !== undefined && this.curLevel !== null) {\n            return this.levels.get(this.curLevel)?.getLevelLightRequirement()\n        }\n    }\n}","import { Snackbar } from '@material-ui/core'\nimport { useState, useEffect, useRef } from 'react'\nimport { LightUp, Toggle } from '../../game/lightup/LightUp'\nimport { LightUpCellComponent } from './LightUpCellComponent'\n\nexport class Pair {\n    public i: number\n    public j: number\n    constructor(i: number, j: number) {\n        this.i = i\n        this.j = j\n    }\n}\n\nconst tuples: Pair[][] = []\nfor (let i = 0; i < 10; i++) {\n    let a = []\n    for (let j = 0; j < 10; j++) {\n        a.push(new Pair(i, j))\n    }\n    tuples.push(a)\n}\n\nexport const LightUpComponent: React.FC<LightUpProps> = props => {\n    const game: LightUp = props.game\n    const [board, setBoard] = useState(game.getBoard())\n    const [toggleCells, setToggleCells] = useState<number[][]>([])\n    const [allCells, setAllCells] = useState<number[][]>([])\n    const [toggle, setToggle] = useState(Toggle.OFF)\n    const [refresh, setRefresh] = useState(false)\n    const [keyCnt, setKeyCnt] = useState(0)\n\n    const move = (i: number, j: number, game: LightUp) => {\n        console.log(`cell clicks (${i}, ${j})`)\n        let lst = game.move(i, j)\n        let toggleCells: number[][] = lst[0]\n        let toggle = lst[1]\n        let allCells = lst[2]\n        setToggle(toggle)\n        setToggleCells(toggleCells)\n        setAllCells(allCells)\n        // setRefresh(pre => !pre)\n    }\n\n    // for selecting a new level\n    useEffect(() => {\n        game.loadLevel(props.requestedLevel)\n        let board = game.getBoard()\n        let R: number = board.length\n        for (let i = 0; i < R; i++) {\n            for (let j = 0; j < R; j++) {\n                const node = board[i][j]\n                if (node.getIsBlock()) {\n                    document.getElementById(`cell-${i}-${j}`)!.className = 'inertia_broken_circle';\n                }\n                else {\n                    document.getElementById(`cell-${i}-${j}`)!.className = 'inertia_ground';\n                }\n            }\n        }\n\n        setKeyCnt(prev => prev + 1)\n        setToggle(prev => Toggle.OFF)\n        setAllCells(prev => [])\n        setToggleCells(prev => [])\n    }, [props.requestedLevel])\n\n    useEffect(() => {\n        if (toggle === Toggle.ON) {\n            console.log(\"TURN ONNNNNNNNNN\")\n            for (let i = 0; i < toggleCells.length; i++) {\n                setTimeout(() => {\n                    const node = toggleCells[i];\n                    document.getElementById(`cell-${node[0]}-${node[1]}`)!.className =\n                        'inertia_ground node-shortest-path';\n                }, 10 * i)\n            }\n        } else {\n            console.log('TURN OFFFFFFFFF')\n            for (let i = 0; i < toggleCells.length; i++) {\n                setTimeout(() => {\n                    const node = toggleCells[i];\n                    document.getElementById(`cell-${node[0]}-${node[1]}`)!.className =\n                        'inertia_ground';\n\n                }, 1)\n            }\n            for (let i = 0; i < allCells.length; i++) {\n                setTimeout(() => {\n                    const node = allCells[i];\n                    document.getElementById(`cell-${node[0]}-${node[1]}`)!.className =\n                        'pipe_grid_cell';\n\n                }, 1)\n            }\n\n\n        }\n    }, [toggleCells, toggle])\n\n    // animatePath(path: number[][]) {\n    //     console.log('animating path')\n    //     for (let i = 0; i < path.length; i++) {\n    //       setTimeout(() => {\n    //         const node = path[i];\n    //         document.getElementById(`cell-${node[0]}-${node[1]}`)!.className =\n    //           'pipe_grid_cell node-shortest-path';\n    //       }, 5 * i);\n    //     }\n    //   }\n\n\n    return (\n        <div className=\"pipe_board center\">\n            <div className=\"grid_container\">\n                {\n                    game.getBoard().map((row, i) => (\n                        <div className=\"pipe_grid_row\">\n                            {row.map((item, j) => (\n                                <LightUpCellComponent\n                                    i={item.getI()}\n                                    j={item.getJ()}\n                                    onClick={() => move(i, j, game)}\n                                    imgSrc={item.getType()}\n                                    type={item.getType()}\n                                    isBlock={item.getIsBlock()}\n                                    isCross={item.getIsCross()}\n                                    isEmpty={item.getIsEmpty()}\n                                    isLight={item.getIsLight()}\n                                    lightNum={item.getLightsNum()}\n                                ></LightUpCellComponent>\n                            ))}\n                        </div>\n                    ))\n                }\n            </div>\n            <Snackbar\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\n                autoHideDuration={1000}\n                message=\"The level is cleared\"\n                open={game.hasWon()}\n                onClose={() => { }}\n            />\n        </div>\n    )\n}\n\ninterface LightUpProps {\n    game: LightUp\n    requestedLevel: string\n}\n","import React from \"react\"\nimport { LightUpCell } from \"../../game/lightup/LightUpCell\"\nimport lightbulb from '../../images/lightbulb.png'\nimport { Pair } from \"./LightUpComponent\"\n\n\nexport const LightUpCellComponent: React.FC<LightUpCellProps> = (props) => {\n    const {\n        i,\n        j,\n        onClick,\n        type,\n        isLight,\n        isBlock,\n        isCross,\n        isEmpty,\n        lightNum,\n    } = props\n    var lightLimit = ''\n    if (lightNum >= 0) {\n        lightLimit = lightNum + ''\n    }\n\n    const cellClassName = isBlock ? \n        'inertia_broken_circle' \n        : 'inertia_ground'\n\n    // const cellClassName = isPlayer\n    //     ? 'inertia_player'\n    //     : isWall\n    //     ? 'inertia_wall'\n    //     : isBrokenCirlce\n    //     ? 'inertia_broken_circle'\n    //     : isGem\n    //     ? 'inertia_gem'\n    //     : isBomb\n    //     ? 'inertia_bomb'\n    //     : isGround\n    //     ? 'inertia_ground'\n    //     : ''\n        \n    const imgName = isLight\n        ? lightbulb\n        : ''\n    \n    // document.getElementById(`cell-${i}-${j}`)!.className = 'inertia_ground' \n    return (\n        <div\n            id={`cell-${i}-${j}`}\n            className={`node ${cellClassName}`}\n            onClick={() => onClick(i, j, type)}\n            // onMouseDown={() => onMouseDown(row, col)}\n            // onMouseEnter={() => onMouseEnter(row, col)}\n            // onMouseUp={() => onMouseUp()}></div> \n        >\n            <img \n                // className={'img'}\n                src={imgName} alt={''}\n            />\n            <text> {lightLimit } </text>\n        </div>\n    )\n}\n\ninterface LightUpCellProps {\n    i: number\n    j: number\n\n    imgSrc: string\n    type: string\n\n    isLight: boolean\n    isBlock: boolean\n    isCross: boolean\n    isEmpty: boolean\n\n    lightNum: number\n\n    onClick: any\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAADOklEQVR4Xu3bPW8UMRAG4A1CUFGnASqo6BBFJIo0SFdTXU0kKn4PNfVV1CkpkChoqUiV/AokpEM+blZe7649u2O/4/gmTe5jvbafe/2xq7uzzv5EAmei0la4M0BhCAzQAIUCwuKWwAYB94k+VfWh19SYA9z3z4+jfm8//aH3q2h7DY2YhHv+4iIK+WzzrQpIbcC9n7gU2pToEVKtH2oVd103wHM4awBdOU1ELcBseJRKLUQNwOx4mohowAHe0/NH3YMnr4U7sWFxdBJVAdfMeQ9ffunF/v7+MMJvGVC84vpaMUgkIjKBPeCa5M2Nc4L009giYNb0hZgOMRzOKERUAoukjyA1U4gALIrnI2qk0ACFm6hmALWukw2w8gRC5r+YQenVuHQCDVCYcAM0wLhANUM43AwvfT7XzZObA3PBoe4RVpNA4VQxW/zkEpgb0gCFogZogP+/aZDzJuoS02YSqIV43wGdm9rVSGk817nS2xgDXDLfzBzLSuDtzQ/2PMk99qQSyEVxHxL32FYAWcPYoXAWGu5xCDzUHMgCpGTFELl47hytAfaIqf3gHFKNeMgEslPoJzFclFL4qDswfrsQ2xi/vsOKnIJwaXv15v3A79fPr8lyyKFLjVMB5C4WhMjFOwXAwVBOLRhLAVELh+YQprqTm2t/GHMSqIGHXkQGc6F7Qt/Qn5oTlwBq/uQBPQf2CfQ1764vR1eBHEAPTmtOh9xMCHFSP+UaYS58ARoKaGVHiP3Hq6ve5N1mc3i83W4P/10aJ5I1em+3241cj+eA9glaWQyQNAhyLnVTcEFZaJ+glbmbq1PpWzhEo4ejU2iAwk/PAO8bILWXhjItIsJ+9IvQ8TywYKAqKr11mfMv3r/iFUytvO61VPLcYkArrv+Ym1TUYqICmMLjIsWOaxYQgedtzIsHpHgF4RA2wHXjq99AG6AQkLOArKtiWKrZOTDEKZXI5gBzpGrFOYrP8cUrCDptNxNWpMAvYoA5AelcOedB1NxHbVcdwga4PI7JmwqxO87eFUaqZlgwYBWlekxXLMzjqml3NQ1hwlV3mAEKPxIDNEChgLC4JdAAhQLC4pZAAxQKCItbAoWA/wB5knZg02yCFQAAAABJRU5ErkJgggAA\"","import { useState } from 'react'\nimport { Inertia } from '../../game/inertia/Inertia'\nimport { Button, Typography, FormControl, InputLabel, Select, MenuItem } from '@material-ui/core'\nimport { Timer } from '../Timer'\nimport { LightUp } from '../../game/lightup/LightUp'\nimport { LightUpLevel } from '../../game/lightup/LightUpLevel'\nimport { LightUpComponent } from './LightUpComponent'\nimport { request } from 'http'\n\n\nconst lightup = new LightUp(10, 10)\nconst levels: Map<string, LightUpLevel> = lightup.getLevels()\nexport const LightUpApp = () => {\n    const [refresh, setRefresh] = useState(false)\n    const [resetTimer, setResetTimer] = useState(false)\n    const [selecteLevelRefresh, setSelectedLevelRefresh] = useState(false)\n    const [requestedLevel, setRequestedLevel] = useState('')\n\n    // const handleReset = () => {\n    //     inertia.reset()\n    //     setRefresh(prev => !prev)\n    //     setResetTimer(prev => !prev)\n    // }\n\n    // const handleRedo = () => {\n    //     inertia.redo()\n    //     setRefresh(prev => !prev)\n    // }\n\n    // const handleUndo = () => {\n    //     inertia.undo()\n    //     console.log('after undo')\n    //     console.log(inertia.getCommandManager().undoStk)\n    //     console.log(`player position ${inertia.getPlayer().getX()} ${inertia.getPlayer().getY()}`)\n    //     setRefresh(prev => !prev)\n    // }\n\n    const handleChange = (event: React.ChangeEvent<{ value: string }>) => {\n        let reqLevel: string = event.target.value\n        // lightup.loadLevel(requestedLevel)\n        setRequestedLevel(prev => reqLevel)\n        setRefresh(prev => !prev)\n        setResetTimer(prev => !prev)\n        setSelectedLevelRefresh(prev => !prev)\n    }\n\n    return (\n        <div className=\"inertia__app\">\n            <h1> LIGHT UP </h1>\n            <Select labelId=\"label\" id=\"select\" onChange={(e: any) => handleChange(e)}>\n                {\n                    [...levels.keys()].map(i => (\n                        <MenuItem value={i}> {i} </MenuItem>\n                    ))\n                }\n                {/* <MenuItem value=\"1\"> 1 </MenuItem>\n                <MenuItem value=\"2\"> 2 </MenuItem>\n                <MenuItem value=\"3\"> 3 </MenuItem> */}\n            </Select>\n            <div>\n                {/* <Button onClick={() => handleReset()}> Reset </Button>\n                <Button onClick={() => handleUndo()}> Undo </Button>\n                <Button onClick={() => handleRedo()}> Redo </Button> */}\n                <Timer resetTimer={resetTimer}></Timer>\n            </div>\n\n            <div>\n                <LightUpComponent requestedLevel={requestedLevel} game={lightup}></LightUpComponent>\n            </div>\n            <div> instruction </div>\n                <p> Trying to collect coins as many as possible. Click undo if you step on a bomb. </p>\n            {/* <div> about </div> */}\n        </div>\n    )\n}\n\n","import { useState } from 'react'\nimport { Button, Typography, Grid, Card, CardActionArea, CardContent, makeStyles } from '@material-ui/core'\nimport { BrowserRouter as Router, Link, Route, Switch } from 'react-router-dom';\nimport { InertiaApp } from '../inertiaComponent/InertiaApp';\nimport SokobanComponent from '../SokobanComponent';\nimport { HudComponent } from '../HudComponent';\nimport { FloodTubes } from '../../game/FloodTube';\nimport { Sokoban } from '../../game/sokoban/Sokoban';\nimport { LightUpApp } from '../lightupComponent/LightUpApp';\n\nconst useStyles = makeStyles({\n    collectionCard: {\n        minWidth: 500,\n        margin: 25,\n        background: '#22A7F0'\n    },\n    collectionContainer: {\n        paddingLeft: '40px',\n        paddingRight: '40px',\n    }\n})\n\n\nconst flood_tube = new FloodTubes(10, 10)\nconst sokoban = new Sokoban(10, 10)\nexport const CollectionComponent = () => {\n    const classes = useStyles()\n    return (\n        <div>\n            <div>\n                <h1> Collections </h1>\n                <Route exact path=\"/NetGame\">\n                    <Grid container spacing={2} className={classes.collectionContainer} justify=\"center\">\n                        <Grid item>\n                            <a href='https://chungwwei.github.io/DeckBuilder/'>\n                                <Card className={classes.collectionCard}>\n                                    <CardActionArea>\n                                        <CardContent>\n                                            <h1> LOR Deck Builder</h1>\n                                        </CardContent>\n                                    </CardActionArea>\n                                </Card>\n                            </a>\n                        </Grid>\n                        <Link to='/sokoban'>\n                            <Grid item xs={12} sm={6}>\n                                <Card className={classes.collectionCard}>\n                                    <CardActionArea>\n                                        <CardContent>\n                                            <h1> Sokoban </h1>\n                                        </CardContent>\n                                    </CardActionArea>\n                                </Card>\n                            </Grid>\n                        </Link>\n                        <Link to='/flushtubes'>\n                            <Grid item xs={12} sm={6}>\n                                <Card className={classes.collectionCard}>\n                                    <CardActionArea>\n                                        <CardContent>\n                                            <h1> Flush Tubes [work in progress]</h1>\n                                        </CardContent>\n                                    </CardActionArea>\n                                </Card>\n                            </Grid>\n                        </Link>\n                        <Link to='/inertia'>\n                            <Grid item xs={12} sm={6}>\n                                <Card className={classes.collectionCard}>\n                                    <CardActionArea>\n                                        <CardContent>\n                                            <h1> Inertia </h1>\n                                        </CardContent>\n                                    </CardActionArea>\n                                </Card>\n                            </Grid>\n                        </Link>\n                        <Link to='/lightup'>\n                            <Grid item xs={12} sm={6}>\n                                <Card className={classes.collectionCard}>\n                                    <CardActionArea>\n                                        <CardContent>\n                                            <h1> Light Up </h1>\n                                        </CardContent>\n                                    </CardActionArea>\n                                </Card>\n                            </Grid>\n                        </Link>\n                    </Grid>\n                </Route>\n                <Route path=\"/inertia\">\n                    <InertiaApp />\n                </Route>\n                <Route path=\"/sokoban\">\n                    <SokobanComponent game={sokoban}></SokobanComponent>\n                </Route>\n                <Route path='/flushtubes'>\n                    <HudComponent game={flood_tube}></HudComponent>\n                </Route>\n                <Route path='/lightup'>\n                    <LightUpApp />\n                </Route>\n\n\n            </div>\n\n        </div>\n    )\n}","import { useState } from 'react'\nimport { Button, Typography, AppBar, Toolbar, IconButton, makeStyles } from '@material-ui/core'\nimport { Link } from 'react-router-dom'\nimport { CollectionComponent } from './CollectionComponent'\n\nconst useStyles = makeStyles({\n    homeBtn: {\n        marginRight: 2\n    }\n\n})\nexport const AppBarComponent = () => {\n    const classes = useStyles()\n    return (\n        <div>\n            <AppBar position=\"static\">\n                <Toolbar>\n                    <Link to=\"/\">\n                        <Button className={classes.homeBtn}> HOME </Button>\n                    </Link>\n                </Toolbar>\n            </AppBar>\n            <CollectionComponent></CollectionComponent>\n        </div>\n    )\n}\n\n","import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport './home.css';\nimport BoardComponent from './components/BoardComponent';\nimport { FloodTubes } from './game/FloodTube';\nimport { Sokoban } from './game/sokoban/Sokoban';\nimport { BrowserRouter as Router, Link, Route, Switch } from 'react-router-dom';\nimport { AppBarComponent } from './components/home/AppBarComponent';\nimport { CollectionComponent } from './components/home/CollectionComponent';\n\nfunction App() {\n  // var light_off = new LightOff(5, 5)\n  var flood_tube = new FloodTubes(10, 10)\n  var sokoban = new Sokoban(10, 10)\n  return (\n    // for deployment purposec\n    <div className='App'>\n      {/* <Router basename={process.env.PUBLIC_URL}> */}\n      <Router>\n        <Switch>\n          <AppBarComponent />\n        </Switch>\n        <p> Enjoy the classic puzzles games </p>\n        <p> Made By ChuangWei Ma</p>\n      </Router>\n\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}